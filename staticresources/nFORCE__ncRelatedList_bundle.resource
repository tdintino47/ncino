!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=116)}({116:function(module,exports,__webpack_require__){module.exports=__webpack_require__(117)},117:function(module,exports,__webpack_require__){__webpack_require__(118),__webpack_require__(119),__webpack_require__(120),__webpack_require__(122),__webpack_require__(123)},118:function(module,exports){!function(){"use strict";angular.module("ncRelatedList",["ncDataTable","ncFieldSetConfigurator"])}()},119:function(module,exports){!function(){"use strict";angular.element(document).ready(function(){angular.bootstrap(document.getElementById("ncRelatedList"),["ncRelatedList"])})}()},120:function(module,exports,__webpack_require__){!function(){"use strict";angular.module("ncRelatedList").component("ncRelatedList",{bindings:{sectionId:"@",guid:"@",contextId:"@",actions:"<?",instructions:"@?",addEditModalContent:"@?",columnSize:"<?",title:"@?",description:"@?",addNewActionOverride:"@?",addNewActionLabel:"@?",areColumnsSortable:"<?",showEditFieldSetButton:"<?",hideMessages:"<?"},controller:["relatedList","pubsub","$scope","picklistService",function(relatedList,pubsub,$scope,picklistService){var ctrl=this;ctrl.$onInit=function(){ctrl.showLoader=!1,ctrl.labels=relatedList.labels,ctrl.columnSize=ctrl.columnSize?ctrl.columnSize+1:5,ctrl.labels.addRecordLabel=ctrl.labels.Add_Record,ctrl.showMessages=void 0===ctrl.hideMessages||!ctrl.hideMessages,ctrl.alertBoxLabels={heading:ctrl.labels.Confirm_Delete_Record,message:ctrl.labels.Delete_Record_Warning,cancel:ctrl.labels.Cancel,confirm:ctrl.labels.Yes_Delete},ctrl.setAlternateButtonLabels(),relatedList.init(ctrl.guid),ctrl.getRecords()},ctrl.getInstructions=function(){return ctrl.instructions},ctrl.getTitle=function(){return ctrl.title?ctrl.title:ctrl.getSectionName()},ctrl.getDescription=function(){return ctrl.description?ctrl.description:""},ctrl.getSectionName=function(){return relatedList.getSectionName(ctrl.sectionId)},ctrl.getChildSectionConfig=function(property){return relatedList.getChildSectionConfig(ctrl.sectionId,property)},ctrl.isEditFieldSet=function(){return relatedList.isEditFieldSet(ctrl.sectionId,["sObjectType","fieldSetKey"])},ctrl.addRecord=function(){ctrl.addNewActionOverride?LifeCycle.Navigator.navigateToRoute(ctrl.addNewActionOverride):(relatedList.ui.block(),relatedList.setGuid(ctrl.guid),relatedList.addRecord(ctrl.sectionId,ctrl.contextId).then(function(resource){relatedList.loadSelection(resource),relatedList.ui.unblock()},function(error){relatedList.setMessage(error),relatedList.ui.unblock()}))},ctrl.deleteRecord=function(record){record&&(relatedList.ui.block(),relatedList.deleteRecord(record).then(function(){ctrl.getRecords()},function(error){relatedList.setMessage(error),relatedList.ui.unblock()}))},ctrl.saveRecord=function(){return relatedList.ui.block(),relatedList.saveData().then(function(){pubsub.publish(pubsub.topics.MODAL_FORM_SUCCESS),relatedList.screenSection.notifyCallbacks(relatedList.screenSection.saveCallbacks),relatedList.clearSelection(),relatedList.screenSection.notifyLightningUI(),picklistService.clearMaps(),ctrl.getRecords()},function(error){relatedList.setMessage(error,"modal"),relatedList.screenSection.notifyLightningUI(),relatedList.ui.unblock()})},ctrl.cancelSaveRecord=function(){relatedList.screenSection.notifyCallbacks(relatedList.screenSection.cancelCallbacks),picklistService.clearMaps(),relatedList.screenSection.notifyLightningUI(),ctrl.getRecords()},ctrl.getRecords=function(){return relatedList.ui.block(),relatedList.getRecords(ctrl.sectionId,ctrl.guid,ctrl.contextId).then(function(screenSection){relatedList.ui.unblock()},function(error){relatedList.setMessage(error),relatedList.ui.unblock()})},ctrl.getAdditionalRecords=function(){var listResource=relatedList.screenSection.getListResource(ctrl.sectionId);listResource&&listResource.remainingIds&&listResource.remainingIds.length&&($scope.$apply(function(){ctrl.showLoader=!0}),relatedList.getAdditionalRecords(listResource).then(function(){ctrl.showLoader=!1}))},ctrl.setAlternateButtonLabels=function(){ctrl.addNewActionLabel&&(ctrl.labels.addRecordLabel=ctrl.addNewActionLabel)},ctrl.getDisableModal=function(){return void 0!==ctrl.addNewActionOverride&&0<ctrl.addNewActionOverride.length},pubsub.subscribe(pubsub.topics.INFINITE_SCROLL_LOAD,ctrl.getAdditionalRecords),window.addEventListener("scroll",function(){window.innerHeight+window.pageYOffset>=document.body.offsetHeight&&pubsub.publish(pubsub.topics.INFINITE_SCROLL_LOAD)})}],template:__webpack_require__(121)})}()},121:function(module,exports){module.exports='<div class=nds-section__header> <message ng-if=::$ctrl.showMessages></message> <div class="slds-p-bottom--small slds-size--0-of-12"> <span class=slds-text-heading--small>{{::$ctrl.getTitle()}}</span> <nc-edit-field-set-button class=pull-right ng-if="$ctrl.isEditFieldSet() && $ctrl.showEditFieldSetButton" entity="{{$ctrl.getChildSectionConfig(\'sObjectType\')}}" field-set-key="{{$ctrl.getChildSectionConfig(\'fieldSetKey\')}}"> </nc-edit-field-set-button> </div> <div class="slds-text-title slds-p-bottom--small slds-size--0-of-12" ng-if=$ctrl.getDescription()> {{::$ctrl.getDescription()}} </div> <div class="slds-text-body--regular slds-p-top--small slds-p-bottom--small slds-size--0-of-12" ng-bind=::$ctrl.getInstructions() ng-show=$ctrl.getInstructions().length /> </div> <div class="nds-section__body slds-p-bottom--none"> <nc-data-table guid={{$ctrl.guid}} section-id={{$ctrl.sectionId}} context-id={{$ctrl.contextId}} column-size=$ctrl.columnSize add-record=$ctrl.addRecord() add-button-label={{$ctrl.labels.addRecordLabel}} edit-record=$ctrl.editRecord(record) edit-button-label={{$ctrl.labels.Edit}} delete-record=$ctrl.deleteRecord(record) delete-button-label={{$ctrl.labels.Delete}} modal-cancel-button=$ctrl.cancelSaveRecord() modal-cancel-button-label={{$ctrl.labels.Cancel}} modal-continue-button=$ctrl.saveRecord() modal-continue-button-label={{$ctrl.labels.Continue}} modal-text-heading-add-mode={{$ctrl.labels.Add_Record}} modal-text-heading-edit-mode={{$ctrl.labels.Edit_Record}} alert-box-labels=::$ctrl.alertBoxLabels actions=$ctrl.actions add-edit-modal-content={{$ctrl.addEditModalContent}} disable-modal=$ctrl.getDisableModal() are-columns-sortable=$ctrl.areColumnsSortable> </nc-data-table> </div> <div ng-if=$ctrl.showLoader role=status class="slds-spinner slds-spinner--medium slds-spinner--brand related-list-spinner"> <span class=slds-assistive-text>Loading</span> <div class=slds-spinner__dot-a></div> <div class=slds-spinner__dot-b></div> </div>'},122:function(module,exports){!function(){"use strict";angular.module("ncRelatedList").provider("relatedListRemoting",function RelatedListRemoting(){var self=this;self.endpoints={},self.$get=function($q){return{deleteRecord:function(record){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.deleteRecord,angular.fromJson(angular.toJson(record))||null,"screen-resource-delete-container-bean",function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)},{escape:!1}),deferred.promise},getRecords:function(sectionId,guid,contextId){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.loadData,sectionId||null,guid||null,contextId||null,function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)},{escape:!1}),deferred.promise},getAdditionalRecords:function(listResource){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.loadAdditionalData,listResource,function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)},{escape:!1}),deferred.promise},createNew:function(screenResource){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.createNew,angular.fromJson(angular.toJson(screenResource))||null,function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)},{escape:!1}),deferred.promise},saveData:function(screenResource){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.saveData,angular.fromJson(angular.toJson(screenResource))||null,function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)},{escape:!1}),deferred.promise}}},self.setEndpoint=function(endpoint){self.endpoint=angular.merge(self.endpoints,endpoint)}})}()},123:function(module,exports){!function(){"use strict";function RelatedList(screenSection,visualForceMarkup,relatedListRemoting,ui,label,messageService,$q,pubsub){var self=this;self.ui=ui,self.screenSection=screenSection,self.labels=label.getLabels(),self.init=function(guid){self.screenSection.formBuilder.setGuid(guid),self.setGuid(guid)},self.getGuid=function(){return self.guid},self.getSectionName=function(screenSectionId){var section;return(section=screenSection.get(screenSectionId))?section.sectionName:section},self.getChildSectionConfig=function(screenSectionId,property){var config;property&&(config=screenSection.getConfiguration(screenSectionId));var isProperty=config&&config.childConfigurations&&0<config.childConfigurations.length&&config.childConfigurations[0].hasOwnProperty(property);return isProperty?config.childConfigurations[0][property]:(isProperty=config&&config.hasOwnProperty(property))?config[property]:void 0},self.isEditFieldSet=function(screenSectionId,requirements){return requirements&&requirements instanceof Array&&0<requirements.filter(function(property){return void 0!==self.getChildSectionConfig(screenSectionId,property)}).length},self.addRecord=function(screenSectionId,contextId){var parts,baseSection=screenSection.get(screenSectionId),resource=screenSection.getResourceFromSection(baseSection),template=angular.copy(resource.children[0]);!template.isList&&template.apexType&&(parts=template.apexType.split("."),template.apexType=parts[0]+".ConfiguredSObjectListScreenResource",_.values(template.propertyBag).filter(function(field){field.value=void 0}));var deferred=$q.defer();return relatedListRemoting.createNew(template).then(function(result){self.getPicklistValues(screenSectionId,contextId,baseSection,!0).then(function(){deferred.resolve(result)},function(reason){screenSection.errorHandler(reason),deferred.reject(reason)})}),deferred.promise},self.loadSelection=function(resource){screenSection.loadChildSection(resource,self.guid),screenSection.set(screenSection.getSelectedChild())},self.clearSelection=function(){screenSection.clearSelectedChild()},self.deleteRecord=function(record){return relatedListRemoting.deleteRecord(record)},self.saveData=function(){var selectedChild=screenSection.getSelectedChild(),resource=selectedChild.isList?selectedChild.children[0]:selectedChild;return relatedListRemoting.saveData(resource)},self.getRecords=function(screenSectionId,guid,contextId){var deferred=$q.defer();return relatedListRemoting.getRecords(screenSectionId,guid,contextId).then(function(result){for(var resource in self.setRecord(result),result.screenResources)self.inflatePropertiesFromDescriptors(result.screenResources[resource]);self.getPicklistValues(screenSectionId,contextId,result,!1).then(function(){deferred.resolve(result)},function(reason){screenSection.errorHandler(reason),deferred.reject(reason)})}),deferred.promise},self.getAdditionalRecords=function(listResource){if(listResource&&listResource.remainingIds&&listResource.remainingIds.length){var deferred=$q.defer(),idsToQuery=listResource.remainingIds.splice(0,listResource.configuration.limitValue),listResourceCopy=angular.copy(listResource);return listResourceCopy.remainingIds=idsToQuery,listResourceCopy.children=[],relatedListRemoting.getAdditionalRecords(listResourceCopy).then(function(result){listResource.children=listResource.children.concat(result.children),self.inflatePropertiesFromDescriptors(listResource),deferred.resolve()},function(result){deferred.resolve()}),deferred.promise}},self.setGuid=function(guid){self.guid=guid},self.setRecord=function(resource){screenSection.set(resource)},self.setMessage=function(message,context){messageService.setMessage({type:messageService.messageTypes.error,text:message,context:context},!0)},self.getPicklistValues=function(screenSectionId,contextId,rootResource,isAddNew){var deferred=$q.defer(),options={isRelatedList:!0,isAddNewModal:isAddNew},resources=_.values(rootResource.screenResources);return self.setOptionValues(resources,options),visualForceMarkup.retrieve(screenSectionId,contextId,rootResource,options).then(function(){deferred.resolve()},function(reason){screenSection.errorHandler(reason),deferred.reject(reason)}),deferred.promise},self.inflatePropertiesFromDescriptors=function(resource){if(resource.configuration){var childResources=self.screenSection.getChildren(resource.configuration.screenSectionId);if(childResources&&childResources.length&&childResources[0].descriptors)for(var i=0,j=childResources.length;i<j;i++)self.screenSection.mergeDescriptorsIntoPropertyBag(childResources[i])}return resource},self.setOptionValues=function(resources,options){resources&&(0<resources.length&&resources[0].children&&0<resources[0].children.length?self.setOptionValues(resources[0].children,options):0<resources.length&&resources[0].configuration?(options.fieldSetKey=resources[0].configuration.fieldSetKey,options.sObjectType=resources[0].configuration.sObjectType):resources.configuration&&(options.fieldSetKey=resources.configuration.fieldSetKey,options.sObjectType=resources.configuration.sObjectType))}}angular.module("ncRelatedList").service("relatedList",RelatedList),RelatedList.$inject=["screenSection","visualForceMarkup","relatedListRemoting","ui","label","messageService","$q","pubsub"]}()}});