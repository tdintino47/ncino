!function(e){function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}var n={};i.m=e,i.c=n,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:t})},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},i.p="",i(i.s=0)}([function(e,i,n){n(1),n(2),n(3),n(4),n(5)},function(e,i){!function(e){var i=function(){var i=this;return i.register=function(i,n){e.registerExtension(function(e,t){t.registerAppName(i),function(e){e.parentApp=function(){var i=LifeCycle.RegistrationApp.getAppsByName("LayoutDesigner");if(!i.length)return null;var n=i.indexOf(e);return n>0?i[n-1]:null},e.preRun=function(i){return e.blockUI=function(){},e.unblockUI=function(){},void 0!=n?n:i},e.postRun=function(i){return i.screenSectionId&&(e.performingAjax(!0),i.loadConfigurationData()),!0}}(t.registeredApps[i]),t.log(i+" App initialized.")}),e.registerModels(i,LifeCycle.LayoutDesigner.Models),e.registerViewModel(i,LifeCycle.LayoutDesigner.ViewModel),e.registerView(i,LifeCycle.LayoutDesigner.View)},i};void 0==LifeCycle.LayoutDesigner&&(LifeCycle.LayoutDesigner={}),void 0==LifeCycle.LayoutDesigner.App&&(LifeCycle.LayoutDesigner.App=i)}(LifeCycle.RegistrationApp)},function(e,i){!function(){var e=function(e,i){i.View=function(e){var n=this;return i.log("View instantiated."),n},i.log("View initialized.")};void 0==LifeCycle.LayoutDesigner&&(LifeCycle.LayoutDesigner={}),void 0==LifeCycle.LayoutDesigner.View&&(LifeCycle.LayoutDesigner.View=e)}()},function(e,n){!function(){var e=[],n=function(n,t){t.ViewModel=function(n){function r(e){var i=void 0;return e instanceof t.ScreenResource&&!e.isList()&&(e.isFlat()&&!e.hasChildren()?i=e:_.each(e.children(),function(e){if(i=r(e))return i})),i}var a=this,o=!1;a.app=t;var s={guid:null,screenResources:ko.observable(),sectionName:"",isHeadless:!1,isEditing:!1,isPreviewing:!1,isViewing:!1,isEditable:!0,isDefaultEditable:!1,instructions:"",breakPageAfter:!1,breakPageBefore:!1,disablePrint:!1,displayOrder:null,executeBusinessLogic:function(){},hasWidget:!1,widget:ko.observable(),displayToggleEffect:null,hasDisplayToggleHeader:!0,saveBodyAsAttachment:!1};if(void 0!=n&&_.extend(s,n),t.mapFromJS(s,t.getMapping(),a),a.showLoader=ko.observable(!LifeCycle.infiniteScrollLoad),a.isAdding=ko.observable(!1),a.isDeleting=ko.observable(!1),a.isLocked=ko.observable(!1),a.hasDisplayToggleEffect=ko.observable(!1),a.uniqueChildren={},a.screenResource=ko.computed({read:function(){return _.first(_.filter(a.screenResources(),function(e){return e instanceof t.ScreenResource}))},deferEvaluation:!0}),a.anchorVM=ko.computed(function(){for(var e=a.app;null!=e.parentApp();){if(!ko.unwrap(e.viewModel.isHeadless()))return e.viewModel;e=e.parentApp()}return e.viewModel}),a.getApp=function(){return a.app},a.isAdding.subscribe(function(e){e&&(a.isDeleting(!1),a.isPreviewing(!1),a.isViewing(!1))}),a.isDeleting.subscribe(function(e){e&&(a.isAdding(!1),a.isEditing(!1),a.isPreviewing(!1),a.isViewing(!1))}),a.isEditing.subscribe(function(e){e&&(a.isDeleting(!1),a.isPreviewing(!1),a.isViewing(!1))}),a.isPreviewing.subscribe(function(e){e&&(a.isAdding(!1),a.isDeleting(!1),a.isEditing(!1),a.isViewing(!1))}),a.isViewing.subscribe(function(e){e&&(a.isAdding(!1),a.isDeleting(!1),a.isEditing(!1),a.isPreviewing(!1))}),a.isExpanded=ko.computed(function(){return a.isViewing()||a.isEditing()||a.isPreviewing()}),a.hasDirtyData=ko.computed({read:function(){return!_.isUndefined(a.screenResource())&&a.screenResource().hasDirtyData()},write:function(e){_.isUndefined(a.screenResource())||a.screenResource().hasDirtyData(e)}}),a.pageBreakStatus=ko.computed(function(){return a.breakPageAfter()?"stitchedActive":"stitched"}),a.pageBreakTextStatus=ko.computed(function(){return a.breakPageAfter()?"page-break-text-active":"page-break-text"}),a.hasDirtyData.subscribe(function(e){e?jQuery(window).on("beforeunload.ui",function(){return LifeCycle.msgs.msg_dirty_data_warning}):jQuery(window).off("beforeunload.ui")}),a.isUnique=function(e){if(e){var i=e.configuration.sObjectType()+"_Id",n=_.filter(_.values(e.propertyBag),function(e){return e.hasOwnProperty("guid")&&e.guid()===i}),t=n.shift();if(t&&!a.uniqueChildren[t.value()])return a.uniqueChildren[t.value()]=e,e}return null},a.unique=function(e){var i=[];return _.each(e(),function(e){var n=a.isUnique(e);n&&i.push(n)}),i},a.hasData=function(e){return!(!e||!e.data||!e.data.guid)},a.hasValidChildren=function(e,i){return!0},a.toggleAdding=function(){return a.clearError(),a.isEditing(a.isDefaultEditable()||!a.isAdding()),a.isAdding(!a.isAdding()),!1},a.toggleDeleting=function(){return a.clearError(),a.isDeleting(!a.isDeleting()),!1},a.toggleEditing=function(){return null!=e&&e&&e!=[]?e.length<2&&a.clearError():a.clearError(),a.isEditing(a.isDefaultEditable()||!a.isEditing()),!1},a.togglePreviewing=function(){return a.clearError(),a.isPreviewing(!a.isPreviewing()),!1},a.toggleViewing=function(){return a.clearError(),a.isViewing(!a.isViewing()),!1},a.toggleExpand=function(){a.isExpanded()?(a.isViewing(!1),a.isPreviewing(!1),a.isEditing(!1)):a.isViewing(!0)},a.togglePageBreak=function(){a.breakPageAfter(!a.breakPageAfter()),Layout.saveSectionData(t.mapToJS(a,{useOptimizedMapper:!0,maxDepth:0,maxHeight:0}),function(e){},function(e,i){console.log(e.message)})},a.navigate=function(e,i){LifeCycle.Navigator.navigateToRoute(e,i)},a.create=function(e){e.isCreateable()&&(LifeCycle.blockUI(),Layout.createNew(t.mapToJS(e),function(i){e.isList()?e.selectedChild(e.children.mappedCreate(i)):t.mapFromJS(i,t.getMapping(),e),a.toggleAdding(),LifeCycle.unblockUI()},a.errorHandler))},a.save=function(i,n){if(a.isAdding()&&i.isCreateable()||!a.isAdding()&&i.isUpdateable()){LifeCycle.blockUI(),n=n&&_.isFunction(n)?n:function(){},n(t.appId,null),e.push(a);var r=i.isList()?i.selectedChild():i;Layout.saveLayoutData(t.mapToJS(r),function(e){t.mapFromJS(e,t.getMapping(),r),i.isList()&&a.saveSuccess(),n(t.appId,"success"),o||(a.isAdding()?a.toggleAdding():a.toggleEditing()),LifeCycle.unblockUI()},function(i,r){for(var o=0;(o=e.indexOf(a,o))>-1;)e.splice(o,1);n(t.appId,"failure"),a.errorHandler(i,r)})}},a.cancel=function(e){a.isAdding()&&(e.isList()&&(e.children.remove(e.selectedChild()),e.selectedChild(void 0)),a.toggleAdding()),a.isEditing()&&(a.hasDirtyData(!1),a.toggleEditing())},a.delete=function(e){if(e.isDeletable()&&confirm(LifeCycle.msgs.msg_confirm_delete)){LifeCycle.blockUI(),a.toggleDeleting();var i=e.isList()?e.selectedChild():e;a.executeBusinessLogic(t.mapToJS(i),"screen-resource-delete-container-bean",function(){e.isList()&&(e.children.remove(i),e.selectedChild(void 0)),a.toggleDeleting(),a.deleteSuccess(),LifeCycle.unblockUI()},a.errorHandler)}},a.loadConfigurationData=function(){Layout.readLayoutData(a.screenSectionId(),a.guid(),t.mapToJS(a.contextObject),function(e){t.mapFromJS(e,t.getMapping(),a),LifeCycle.infiniteScrollLoad||a.loadMoreChildren()},function(e,i){t.performingAjax(!1),Layout.errorFunction(e,i)})},a.loadMoreChildren=function(){for(var e in a.screenResources()){var i=a.screenResources()[e];if(i instanceof t.ScreenResource){var n=i.children().length;n>0?jQuery.each(i.children(),function(e,i){a.loadMoreData(i,function(){--n<=0&&a.signalLoadEnd()})}):a.signalLoadEnd()}}},a.loadMoreData=function(e,i){if(LifeCycle.infiniteScrollLoad&&a.showLoader(!0),e.remainingIds&&e.remainingIds()&&e.remainingIds().length>0){var n=e.remainingIds().splice(0,e.configuration.limitValue()),r=_.clone(t.mapToJS(e));r.remainingIds=n,r.children=[],Layout.readMoreData(r,function(n){LifeCycle.infiniteScrollLoad||a.loadMoreData(e,i);for(var r=e.children(),o=0,s=n.children.length;o<s;o++){var l=n.children[o];r.push(t.mapFromJS(l,t.getMapping(),new t.ScreenResource(l)))}e.children.valueHasMutated(),a.showLoader(!1)})}else i()},a.saveAttachment=function(e){if(a.screenSectionId()==e&&!_.isUndefined(LifeCycle.Service)){var i=jQuery("#"+a.screenSectionId()).clone(),n=jQuery(i).find("*[data-bind]");jQuery(n).attr("data-bind",""),LifeCycle.Service.saveAttachment(a.screenSectionId(),LifeCycle.msgs.msg_rendered_view_filename,LifeCycle.msgs.msg_text_plain,i.html(),!0,!1,function(){},function(){})}},a.signalLoadEnd=function(){a.showLoader(!1),a.widget().isKnockout()&&a.signalWidgets(),!a.widget().isNarrative()&&a.saveBodyAsAttachment()&&t.publish("layoutDesigner.saveRenderedView",a.screenSectionId()),jQuery(".force .form-control").first().focus(),jQuery(window).scrollTop(0),t.performingAjax(!1)},a.print=function(){a.disablePrint()||window.print()},a.setFocusFirstFormControl=function(e){e&&jQuery(".force .form-control:first").focus()},a.expandAll=function(){return a.actionParentApps(function(e){e.isViewing(!0)})},a.hideAll=function(){return a.actionParentApps(function(e){e.isViewing(!1),e.isEditing(!1),e.isPreviewing(!1)})},a.actionParentApps=function(e){for(var i=a.app;null!=i;)e(i.viewModel),i=i.parentApp();return!1},a.getCurrencyIsoCode=function(e,i){var n=e+"_CurrencyIsoCode",t=i[n];return t?t.value():""},LifeCycle.GlobalActionButtonHandler){var l;a.screenResource.subscribe(function(e){(e=r(e))&&e.isUpdateable()&&a.isEditable()&&(a.isDefaultEditable()?(t.publish(LifeCycle.Topics.GlobalActionButtonHandler.SHOW_SAVE),t.publish(LifeCycle.Topics.GlobalActionButtonHandler.FIRE_SAVE_WITH_CONTINUE)):t.publish(LifeCycle.Topics.GlobalActionButtonHandler.SHOW_EDIT),l&&l.dispose(),l=a.isEditing.subscribe(function(e){t.publish(LifeCycle.Topics.GlobalActionButtonHandler.RESET),e?(t.publish(LifeCycle.Topics.GlobalActionButtonHandler.SHOW_SAVE),a.isDefaultEditable()?t.publish(LifeCycle.Topics.GlobalActionButtonHandler.SHOW_CONTINUE):t.publish(LifeCycle.Topics.GlobalActionButtonHandler.SHOW_CANCEL)):(t.publish(LifeCycle.Topics.GlobalActionButtonHandler.SHOW_EDIT),t.publish(LifeCycle.Topics.GlobalActionButtonHandler.SHOW_CONTINUE))}))})}a.signalWidgets=function(){jQuery(document).trigger(jQuery.Event(a.screenSectionId()),[a])},a.errorHandler=function(e,i){LifeCycle.unblockUI(),t.publish(LifeCycle.MessageHandler.Topics.ERROR,e.message)},a.clearError=function(){t.publish(LifeCycle.MessageHandler.Topics.CLEAR_ERROR)},a.saveSuccess=function(){t.publish(LifeCycle.MessageHandler.Topics.SUCCESS,LifeCycle.msgs.msg_save_success)},a.deleteSuccess=function(){t.publish(LifeCycle.MessageHandler.Topics.DELETE,LifeCycle.msgs.msg_delete_success)};var u="lookup.search"+a.guid();return t.subscribe(u,function(e,i){a.executeBusinessLogic(t.mapToJS(e),"screen-resource-search-container-bean",i,a.errorHandler)}),a.saveBodyAsAttachment()&&t.subscribe("layoutDesigner.saveRenderedView",a.saveAttachment),LifeCycle.GlobalActionButtonHandler&&(t.subscribe(LifeCycle.Topics.GlobalActionButtonHandler.SAVE,function(e){a.save(a.screenResource(),e)}),t.subscribe(LifeCycle.Topics.GlobalActionButtonHandler.EDIT,function(){a.toggleEditing()}),t.subscribe(LifeCycle.Topics.GlobalActionButtonHandler.CANCEL,function(){a.cancel()}),t.subscribe(LifeCycle.Topics.GlobalActionButtonHandler.RESET_DIRTY_DATA_ON_CONTINUE,function(){a.hasDirtyData(!1)})),LifeCycle.MessageHandler&&t.subscribe(LifeCycle.MessageHandler.Topics.TOGGLE_VIEWSTATE,function(){for(o=!0,i=0;i<e.length;i++)e[i].isAdding()?e[i].toggleAdding(!1):e[i].isEditing(!1)}),a.editingContent=void 0,a.saveNarrative=function(e){var i=jQuery("#wysiwyg_"+e.guid()).data("liveEdit").getActiveEditorId();if(i){var n=jQuery("#"+i).data("liveEdit").getXHTMLBody();Layout.saveNarrativeData(jQuery("#wysiwyg_id_"+e.guid()).val(),n,function(){a.editingContent=void 0,jQuery("#"+i).css({minHeight:"0"}).data("liveEdit").finishedit(),a.toggleWysiwig(e.guid())},a.errorHandler)}},a.enterWysiwig=function(e){var i=jQuery("#wysiwyg_"+e.guid());i.liveEdit({css:["bootstrap/css/bootstrap.min.css","bootstrap/bootstrap_extend.css"],groups:[["group1","",["Bold","Italic","Underline","FontName","ForeColor","RemoveFormat"]],["group2","",["Bullets","Numbering","Indent","Outdent"]],["group3","",["Paragraph","FontSize"]],["group4","",["LinkDialog","ImageDialog","TableDialog"]],["group5","",["Undo","Redo","FullScreen"]]]}),i.css({minHeight:"20em"}).data("liveEdit").startedit(),a.editingContent=i.data("liveEdit").getXHTMLBody(),a.toggleWysiwig(e.guid())},a.cancelWysiwig=function(e){var i=jQuery("#wysiwyg_"+e.guid()).data("liveEdit").getActiveEditorId();if(i){var n=jQuery("#"+i);_.isUndefined(a.editingContent)||(n.data("liveEdit").loadHTML(a.editingContent),a.editingContent=void 0),n.css({minHeight:"0"}).data("liveEdit").finishedit(),a.toggleWysiwig(e.guid())}},a.toggleWysiwig=function(e){jQuery("#wysiwyg_controls_"+e).is(":visible")?(a.widget().isActive(!1),jQuery("#wysiwyg_controls_"+e).hide(),jQuery("#wysiwyg_edit_link_"+e).show(),jQuery('button[id^="wysiwyg_edit_link_"]').removeAttr("disabled").removeAttr("title")):(a.widget().isActive(!0),jQuery("#wysiwyg_controls_"+e).show(),jQuery("#wysiwyg_edit_link_"+e).hide(),jQuery('button[id^="wysiwyg_edit_link_"]').attr("disabled","disabled").attr("title",LifeCycle.msgs.msgs_narrative_edit_blocked))},LifeCycle.infiniteScrollLoad&&(t.subscribe("Infinite_Scroll_Load_More",a.loadMoreChildren),jQuery(window).scroll(function(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&t.publish("Infinite_Scroll_Load_More")})),t.log("ViewModel instantiated."),a},t.log("ViewModel initialized.")};void 0==LifeCycle.LayoutDesigner.ViewModel&&(LifeCycle.LayoutDesigner.ViewModel=n)}()},function(e,i){!function(){var e=((new Date).getTimezoneOffset(),function(e,n){n.Field=function(e,t,r){function a(e){if(!_.isUndefined(e)){var n=[];return _.each(jQuery(e).find("option"),function(e){n.push({active:!0,defaultValue:e.defaultSelected,label:e.label?e.label:e.text,value:e.label===i?"":e.value})}),n}}function o(e,i){for(var n=0;n<i.length;n++){var t=i[n];if(t.value()==e)return t}return{label:ko.observable(e),value:ko.observable(e),defaultValue:ko.observable(!1),active:ko.observable(!0)}}var s,l,u=this;u.setData=function(e){s=_.extend({contextIdentifier:null,controllingGuid:null,displayOrder:null,displayValue:null,fieldLabel:null,inlineHelpText:null,fieldLength:null,fieldName:null,fieldType:null,guid:null,isDependent:!1,isDirty:!1,isReadOnly:!1,isRequired:!1,isVisible:!0,isHtmlFormatted:!1,options:[],precision:null,referenceContext:null,scale:null,value:null},_.isUndefined(r)?{}:r,_.isUndefined(e)?{}:e),!_.isUndefined(n.viewModel)&&n.viewModel instanceof n.ViewModel&&!_.isUndefined(t)&&t instanceof n.FieldsMap&&(l=document.getElementById("vf-field-source-"+n.viewModel.guid()+"-"+t.getParent().guid()+"-"+s.guid),l=_.isNull(l)?void 0:l);var i=a(l);return s.options=_.isUndefined(i)?s.options:i,_.isUndefined(u.selectedOptions)||u.selectedOptions([]),n.mapFromJS(s,n.getMapping(),u)},u.resetData=function(){return n.mapFromJS(s,n.getMapping(),u)},u.setData(e),u.isOriginallyRequired=u.isRequired(),u.isFieldType=function(e,i){return(i=_.isUndefined(i)?u.fieldType():i)==e},u.isDateType=function(e){return u.isFieldType(Layout.DATA.fieldTypes.DATE,e)},u.isDateTimeType=function(e){return u.isFieldType(Layout.DATA.fieldTypes.DATETIME,e)},u.isDoubleType=function(e){return u.isFieldType(Layout.DATA.fieldTypes.DOUBLE,e)},u.isPicklistType=function(e){return u.isFieldType(Layout.DATA.fieldTypes.PICKLIST,e)},u.isMultiPicklistType=function(e){return u.isFieldType(Layout.DATA.fieldTypes.MULTIPICKLIST,e)},u.isReferenceType=function(e){return u.isFieldType(Layout.DATA.fieldTypes.REFERENCE,e)},u.DEFAULT_PLACEHOLDER=u.isDoubleType()?"0"+(u.scale()?".":"")+Array(u.scale()+1).join("0"):"",u.MULTIPICK_VAL_DELIM=";",u.isDisabled=ko.observable(u.isReadOnly()),u.placeholder=ko.observable(u.DEFAULT_PLACEHOLDER),u.selectedOptions=ko.observableArray([]);var c=u.isReferenceType()?"displayValue":"value";if(u[c].subscribe(function(e){e=_.isUndefined(e)||_.isNull(e)||""===e?null:e,u.isDirty(e!=s[c])},null,"change"),u.isDateType()||u.isDateTimeType()){var d=function(e){_.isNull(e)?u.displayValue(null):u.isDateType()?u.displayValue(moment(e).utc().format("YYYY-MM-DD")):u.isDateTimeType()&&u.displayValue(moment(e).format("YYYY-MM-DDTHH:mm"))};d(u.value()),u.value.subscribe(d),u.displayValue.subscribe(function(e){if(_.isNaN(e)||_.isUndefined(e)||_.isNull(e))u.value(null);else if(u.isDateType()){var i=moment(e+" +00:00").valueOf();u.value(i)}else u.value(moment(e).valueOf())})}if(u.isPicklistType()&&(u.value.subscribe(function(e){_.isUndefined(l)||jQuery(l).find("select").val(u.value()).trigger("change")}),u.isDependent()&&!_.isEmpty(u.controllingGuid())&&!_.isUndefined(t[u.controllingGuid()])&&t[u.controllingGuid()]instanceof n.Field&&t[u.controllingGuid()].value.subscribe(function(e){if(!_.isUndefined(l)){var n=u.options().length;_.each(a(l),function(e){var i=u.options.mappedIndexOf(e);-1==i?u.options.mappedCreate(e):(u.options.push(u.options()[i]),u.options.splice(i,1),n--)}),u.options.splice(0,n),u.options&&(1===u.options().length&&u.options()[0].label()===i?u.isRequired(!1):u.isRequired(u.isOriginallyRequired))}}),u.selectedOption=ko.computed({read:function(){return o(u.value(),u.options())},write:function(e){e=_.isEmpty(e)?void 0:e,u.value(_.isObject(e)?e.value():e)},deferEvaluation:!0})),u.isMultiPicklistType()){var f=function(e){u.selectedOptions(_.isNull(e)?[]:e.split(u.MULTIPICK_VAL_DELIM))};u.value.subscribe(f),u.selectedOptions.subscribe(function(e){u.value(_.isEmpty(e)?null:e.join(u.MULTIPICK_VAL_DELIM))}),u.selectedOptions.subscribe(function(e){var i=[];_.isEmpty(e)||_.each(e,function(e){if(!_.isNull(e)){var n=o(e,u.options());n&&i.push(n.label())}}),u.displayValue(_.isEmpty(i)?"":i.join(u.MULTIPICK_VAL_DELIM+" "))}),f(u.value())}return u.isReferenceType()&&(u.placeholder(LifeCycle.msgs.type_to_search),u.displayValue.subscribe(function(e){_.isEmpty(e)&&u.value(null)})),u.getApp=function(){return n},u.getParent=function(){return t},u.getCurrencyIsoCode=function(e){return n.viewModel.getCurrencyIsoCode(u.contextIdentifier(),e)},u},n.FieldsMap=function(e,i){var t=this;return t.getFields=function(){return _.filter(_.values(t),function(e){return e instanceof n.Field})},t.getParent=function(){return i},t},n.ScreenResource=function(e){var i=this;return n.mapFromJS({apexType:null,children:[],guid:null,propertyBag:{},isAccessible:!1,isCreateable:!1,isDeletable:!1,isUpdateable:!1,isHierarchy:!1,isList:!1},n.getMapping(),i),i.selectedChild=ko.observable(),i.propertyList=ko.computed({read:function(){return _.filter(_.values(i.propertyBag),function(e){return e instanceof n.Field&&e.isVisible()}).sort(function(e,i){return e.displayOrder()-i.displayOrder()})},deferEvaluation:!0}),i.isFlat=ko.computed({read:function(){return!(i.isHierarchy()||i.isList())},deferEvaluation:!0}),i.hasChildren=ko.computed({read:function(){return i.children().length>0},deferEvaluation:!0}),i.hasDirtyData=ko.computed({read:function(){var e=!1;return _.each(i.propertyList(),function(i){i.isDirty()&&(e=!0)}),_.each(i.children(),function(i){i.hasDirtyData()&&(e=!0)}),e},write:function(e){e||(_.each(i.propertyList(),function(e){e.isDirty()&&e.resetData()}),_.each(i.children(),function(i){i.hasDirtyData()&&i.hasDirtyData(e)}))},deferEvaluation:!0}),i.getViewModel=function(){return n.viewModel},i},n.ScreenResourcesMap=function(e){var i=this;return _.isUndefined(e)||(_.each(e,function(e,i){_.isUndefined(n.getMapping()[i])&&(n.getMapping()[i]=n.getMapping().screenResource)}),n.mapFromJS(e,n.getMapping(),i)),i},n.WidgetMap=function(e){var i=this;i.PARAM_SET_DELIM=";",i.PARAM_VAL_DELIM=":";var t={widgetParams:"",isLoading:!1,progressBarPercentage:"0%",isActive:null,loadingText:LifeCycle.msgs.label_widget_loading_text,waitingText:LifeCycle.msgs.label_widget_please_wait_text};return void 0!=e&&_.extend(t,e),n.mapFromJS(t,n.getMapping(),i),i.isLoading.subscribe(function(e){0==e&&i.progressBarPercentage("100%")}),i.progressBarMessage=ko.computed({read:function(){return i.progressBarPercentage()+" loaded"}}),i.isActive=ko.observable(!1),i.height=ko.computed({read:function(){return i.isActive()||_.isUndefined(i.widgetParams().height)?"auto":i.widgetParams().height()},deferEvaluation:!0}),i},n.setMapping({copy:["descriptors"],children:{create:function(e){return new n.ScreenResource(e.data)},update:function(e){return n.mapFromJS(e.data,n.getMapping(),e.target)}},field:{create:function(e){return new n.Field(e.data,e.parent,e.parent.getParent&&e.parent.getParent().descriptors?e.parent.getParent().descriptors.fields[e.data.guid]:void 0)},update:function(e){return e.target.setData(e.data)}},options:{create:function(e){return new Object},update:function(e){return n.mapFromJS(e.data,n.getMapping(),e.target)},key:function(e){return ko.utils.unwrapObservable(e.value)}},propertyBag:{create:function(e){return new n.FieldsMap(e.data,e.parent)},update:function(e){return _.each(e.data,function(e,i){_.isUndefined(n.getMapping()[i])&&(n.getMapping()[i]=n.getMapping().field)}),n.mapFromJS(e.data,n.getMapping(),e.target)}},screenResource:{create:function(e){return new n.ScreenResource(e.data)},update:function(e){return n.mapFromJS(e.data,n.getMapping(),e.target)}},screenResources:{create:function(e){return new n.ScreenResourcesMap(e.data)}},widget:{create:function(e){return new n.WidgetMap(e.data)}},widgetParams:{create:function(e){return ko.observable({})},update:function(e){var i={};return _.isString(e.data)&&!_.isEmpty(e.data)&&_.map(e.data.split(e.parent.PARAM_SET_DELIM),function(n){var t=n.split(e.parent.PARAM_VAL_DELIM);i[t[0]]=t[1]}),n.mapFromJS(i,n.getMapping(),e.target)}}}),n.log("Models initialized.")});void 0==LifeCycle.LayoutDesigner&&(LifeCycle.LayoutDesigner={}),void 0==LifeCycle.LayoutDesigner.Models&&(LifeCycle.LayoutDesigner.Models=e);var i="--None--"}()},function(e,i){!function(){var e=((new Date).getTimezoneOffset(),function(e,i){i.Field=function(e,i,n){function t(e,i){for(var n=0;n<i.length;n++){var t=i[n];if(ko.unwrap(t.value)==e)return t}return{label:e,value:e,defaultValue:!1,active:!0}}var r;return r=_.extend({contextIdentifier:null,controllingGuid:null,displayOrder:null,displayValue:null,fieldLabel:null,inlineHelpText:null,fieldLength:null,fieldName:null,fieldType:null,guid:null,isDependent:!1,isDirty:!1,isReadOnly:!1,isRequired:!1,isVisible:!0,options:[],precision:null,referenceContext:null,scale:null,value:null},_.isUndefined(n)?{}:n,_.isUndefined(e)?{}:e),self=r,self.isFieldType=function(e,i){return(i=_.isUndefined(i)?ko.unwrap(self.fieldType):i)==e},self.isCurrencyType=function(e){return self.isFieldType(Layout.DATA.fieldTypes.CURRENCY,e)},self.isDateType=function(e){return self.isFieldType(Layout.DATA.fieldTypes.DATE,e)},self.isDateTimeType=function(e){return self.isFieldType(Layout.DATA.fieldTypes.DATETIME,e)},self.isIntegerType=function(e){return self.isFieldType(Layout.DATA.fieldTypes.INTEGER,e)},self.isDoubleType=function(e){return self.isFieldType(Layout.DATA.fieldTypes.DOUBLE,e)},self.isPercentType=function(e){return self.isFieldType(Layout.DATA.fieldTypes.PERCENT,e)},self.isPicklistType=function(e){return self.isFieldType(Layout.DATA.fieldTypes.PICKLIST,e)},self.isMultiPicklistType=function(e){return self.isFieldType(Layout.DATA.fieldTypes.MULTIPICKLIST,e)},self.isReferenceType=function(e){return self.isFieldType(Layout.DATA.fieldTypes.REFERENCE,e)},(self.isIntegerType()||self.isDoubleType()||self.isCurrencyType()||self.isPercentType())&&!self.value&&(self.value=0),self.isPicklistType()&&(self.selectedOption=function(){return t(ko.unwrap(this.value),ko.unwrap(this.options))}),self.isMultiPicklistType()&&function(e){self.selectedOptions=e?e.split(";"):[]}(ko.unwrap(self.value)),r},i.FieldsMap=function(e,n){var t=this;return t.getFields=function(){return _.filter(_.values(t),function(e){return e instanceof i.Field})},t.getParent=function(){return n},t.hasContent=function(e){var i=e.split("."),n=i[0],r=i[1],a=!1;return t[n]&&(void 0===r||t[n][r])&&(a=!0),a},t.getContent=function(e,i,n){var r=e.split("."),a=r[0],o=r[1];i=void 0!==i&&!!i;var s;return void 0!==t[a]&&(i&&"function"==typeof t[a][o]?(s=t[a][o](),void 0!==n&&(s=s[n])):void 0!==t[a][o]&&null!==t[a][o]?s=t[a][o]:void 0!==t[a].data[o]&&(s=t[a].data[o])),s},t},i.ScreenResource=function(e){var n=this;return i.mapFromJS({apexType:null,children:[],guid:null,propertyBag:{},isAccessible:!1,isCreateable:!1,isDeletable:!1,isUpdateable:!1,isHierarchy:!1,isList:!1},i.getMapping(),n),n.selectedChild=ko.observable(),n.propertyList=ko.computed({read:function(){return _.filter(_.values(n.propertyBag),function(e){return e instanceof i.Field&&e.isVisible()}).sort(function(e,i){return e.displayOrder()-i.displayOrder()})},deferEvaluation:!0}),n.isFlat=ko.computed({read:function(){return!(n.isHierarchy()||n.isList())},deferEvaluation:!0}),n.hasChildren=ko.computed({read:function(){return n.children().length>0},deferEvaluation:!0}),n.hasDirtyData=ko.computed({read:function(){var e=!1;return _.each(n.propertyList(),function(i){i.isDirty()&&(e=!0)}),_.each(n.children(),function(i){i.hasDirtyData()&&(e=!0)}),e},write:function(e){e||(_.each(n.propertyList(),function(e){e.isDirty()&&e.resetData()}),_.each(n.children(),function(i){i.hasDirtyData()&&i.hasDirtyData(e)}))},deferEvaluation:!0}),n.getViewModel=function(){return i.viewModel},n},i.ScreenResourcesMap=function(e){var n=this;return _.isUndefined(e)||(_.each(e,function(e,n){_.isUndefined(i.getMapping()[n])&&(i.getMapping()[n]=i.getMapping().screenResource)}),i.mapFromJS(e,i.getMapping(),n)),n},i.WidgetMap=function(e){var n=this;n.PARAM_SET_DELIM=";",n.PARAM_VAL_DELIM=":";var t={widgetParams:""};return void 0!=e&&_.extend(t,e),i.mapFromJS(t,i.getMapping(),n),n.isLoading=ko.observable(!1),n.progressBarPercentage=ko.observable("0%"),n.isActive=ko.observable(!1),n.loadingText=LifeCycle.msgs.label_widget_loading_text,n.waitingText=LifeCycle.msgs.label_widget_please_wait_text,n.isLoading.subscribe(function(e){0==e&&n.progressBarPercentage("100%")}),n.progressBarMessage=ko.computed({read:function(){return n.progressBarPercentage()+" loaded"}}),n.height=ko.computed({read:function(){return n.isActive()||_.isUndefined(n.widgetParams().height)?"auto":n.widgetParams().height()},deferEvaluation:!0}),n},i.setMapping({copy:["descriptors"],children:{create:function(e){return new i.ScreenResource(e.data)},update:function(e){return i.mapFromJS(e.data,i.getMapping(),e.target)}},options:{create:function(e){return new Object},update:function(e){return i.mapFromJS(e.data,i.getMapping(),e.target)},key:function(e){return ko.utils.unwrapObservable(e.value)}},propertyBag:{create:function(e){return new i.FieldsMap(e.data,e.parent)},update:function(e){var n=e.parent.descriptors||{fields:{}};return _.each(e.data,function(t,r){e.data[r]=i.Field(t,e.target,n.fields[t.guid])}),i.mapFromJS(e.data,i.getMapping(),e.target)}},screenResource:{create:function(e){return new i.ScreenResource(e.data)},update:function(e){return i.mapFromJS(e.data,i.getMapping(),e.target)}},screenResources:{create:function(e){return new i.ScreenResourcesMap(e.data)}},widget:{create:function(e){return new i.WidgetMap(e.data)}},widgetParams:{create:function(e){return ko.observable({})},update:function(e){var n={};return _.isString(e.data)&&!_.isEmpty(e.data)&&_.map(e.data.split(e.parent.PARAM_SET_DELIM),function(i){var t=i.split(e.parent.PARAM_VAL_DELIM);n[t[0]]=t[1]}),i.mapFromJS(n,i.getMapping(),e.target)}}}),i.log("Models initialized.")});void 0==LifeCycle.LayoutDesigner&&(LifeCycle.LayoutDesigner={}),void 0==LifeCycle.LayoutDesigner.Models&&(LifeCycle.LayoutDesigner.Models=e)}()}]);