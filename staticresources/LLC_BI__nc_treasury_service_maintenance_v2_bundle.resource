!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=165)}({165:function(module,exports,__webpack_require__){module.exports=__webpack_require__(166)},166:function(module,exports,__webpack_require__){__webpack_require__(167),__webpack_require__(168),__webpack_require__(169),__webpack_require__(170),__webpack_require__(171),__webpack_require__(172),__webpack_require__(173),__webpack_require__(174),__webpack_require__(175),__webpack_require__(176),__webpack_require__(177),__webpack_require__(178),__webpack_require__(179),__webpack_require__(180),__webpack_require__(181),__webpack_require__(182),__webpack_require__(183),__webpack_require__(184),__webpack_require__(185),__webpack_require__(186),__webpack_require__(187),__webpack_require__(188),__webpack_require__(189),__webpack_require__(190),__webpack_require__(191),__webpack_require__(192),__webpack_require__(193),__webpack_require__(194),__webpack_require__(195),__webpack_require__(196),__webpack_require__(197),__webpack_require__(198),__webpack_require__(199),__webpack_require__(200),__webpack_require__(201),__webpack_require__(202)},167:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2",["ngRoute","ncDataProviders","ncUI","ncScreenSectionFormBuilder","ncNavigator"])}()},168:function(module,exports){!function(){"use strict";angular.element(document).ready(function(){angular.bootstrap(document.getElementById("ncTreasuryServiceMaintenance"),["ncTreasuryServiceMaintenance_v2"])})}()},169:function(module,exports){angular.module("ncTreasuryServiceMaintenance_v2").component("actionTab",{bindings:{actionTab:"<",isSelected:"<"},templateUrl:"action-tab.partial.html"})},170:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2").component("actionTabFormEntry",{bindings:{order:"<"},controller:["screenSection","formBuilder","maintenanceConfigurationLoader","tmScreenSection","store","$timeout",function ActionTabFormEntry(screenSection,formBuilder,config,tmScreenSection,store,$timeout){var ctrl=this;ctrl.addToOrder=function addToOrder(){store.dispatch({type:store.types.MAINTENANCE_ORDER_SAVE})},ctrl.getPrePopulationContext=function getPrePopulationContext(sObjectType){var state=store.get();if(!state.isPrePopulating)return;if(void 0!==state.prePopulatingContexts[sObjectType])return state.prePopulatingContexts[sObjectType];if(sObjectType.toUpperCase()===ALWAYS_PROVIDE_CONTEXT)return state.orders[state.selected].selectedMaintenanceService.identity},ctrl.getSubmitButtonLabel=function getSubmitButtonLabel(){return config.labelProvider.getLabels().Treasury_Maintenance_Maintenance_Request_Orders},ctrl.getSelectedOrder=function getSelectedOrder(){return store.get().selected},ctrl.isPrePopulatingAvailable=function isPrePopulatingAvailable(){return store.get().isPrePopulatingAvailable},ctrl.guid=function guid(sectionId){return tmScreenSection.guid(ctrl.order.selectedPicklistItem,ctrl.order.selectedActionTab,sectionId)},ctrl.onPrePopulationPressed=function onPrePopulationPressed(){store.dispatch({type:store.types.PREPOPULATING_ACTIVATE,payload:ctrl.order.selectedActionTab}),ctrl.rerender()},ctrl.rerender=function rerender(){ctrl.rendered=!1,$timeout(function(){ctrl.rendered=!0},0)},ctrl.shouldInflate=function shouldInflate(){var isPrePopulatingWithCurrentRecordValues=store.get().isPrePopulating,enableCarryOverValues=store.get().enableCarryOverValues,isEditingExistingOrder=store.get().selected!==store.constants.PENDING_ORDER;if(isPrePopulatingWithCurrentRecordValues)return!1;if(enableCarryOverValues||isEditingExistingOrder)return!0;return!1},ctrl.shouldRender=function shouldRender(){return ctrl.rendered},ctrl.useCachedSection=function useCachedSection(sectionId){return void 0!==screenSection.get(sectionId)},ctrl.rendered=!0;var ALWAYS_PROVIDE_CONTEXT="LLC_BI__TREASURY_SERVICE__C"}],templateUrl:"action-tab-form-entry.partial.html"})}()},171:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2").component("actionTabs",{bindings:{order:"<"},controller:["maintenanceConfigurationLoader","store",function(config,store){var ctrl=this;ctrl.getActions=function getActions(){return ctrl.actions},ctrl.getActionLabel=function getActionLabel(action){return action.label},ctrl.getMoreButtonLabel=function getMoreButtonLabel(){return config.labelProvider.getLabels().More},ctrl.getActionTabs=function getActionTabs(){if(ctrl._cachedOptions)return ctrl._cachedOptions;ctrl.order&&ctrl.order.selectedPicklistItem&&config.isLoaded()&&(ctrl._cachedOptions=config.get().getActionTabsForPicklist(ctrl.order.selectedPicklistItem));return ctrl._cachedOptions},ctrl.getSelectedActionTab=function getSelectedActionTab(){return ctrl.selectedActionTab},ctrl.isSelected=function isSelected(identity){if(ctrl._selectedOptionIdentity)return ctrl._selectedOptionIdentity===identity;ctrl.order&&ctrl.order.selectedActionTab&&(ctrl._selectedOptionIdentity=ctrl.order.selectedActionTab.identity);return ctrl._selectedOptionIdentity===identity},ctrl.selectActionTab=function selectActionTab(tab){store.get().selected===store.constants.PENDING_ORDER?store.dispatch({type:store.types.CHANGE_ACTION,payload:tab}):store.dispatch({type:store.types.MAINTENANCE_ORDER_DESELECT})},ctrl.$onChanges=function $onChanges(changes){changes.hasOwnProperty("order")&&void 0!==changes.order.currentValue&&config.isLoaded()&&(ctrl._cachedOptions=config.get().getActionTabsForPicklist(ctrl.order.selectedPicklistItem),ctrl._selectedOptionIdentity=ctrl.order.selectedActionTab.identity)},ctrl._selectedOptionIdentity=void 0,ctrl._cachedOptions=void 0}],templateUrl:"action-tabs.partial.html"})}()},172:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2").component("actions",{bindings:{order:"<",dispatch:"<",actionTabs:"<",selectedService:"<",selectedActionTab:"<",onActionTabSelected:"&",onSubmitMaintenanceOrder:"&"},require:{ncTreasuryServiceMaintenanceCtrl:"^ncTreasuryServiceMaintenance"},controller:["maintenanceConfigurationLoader",function(config){var ctrl=this;ctrl.getActionTabs=function getActionTabs(){if(ctrl._cachedOptions)return ctrl._cachedOptions;ctrl.order&&ctrl.order.selectedPicklistItem&&config.isLoaded()&&(ctrl._cachedOptions=config.get().getActionTabsForPicklist(ctrl.order.selectedPicklistItem));return ctrl._cachedOptions},ctrl.getSelectedMaintenanceOrder=function getSelectedMaintenanceOrder(){return ctrl.order},ctrl.isSelectedActionTab=function isSelectedActionTab(actionTab){if(ctrl.order)return ctrl.order.selectedActionTab.identity===actionTab},ctrl.$onChanges=function $onChanges(changes){changes.hasOwnProperty("order")&&void 0!==changes.order.currentValue&&config.isLoaded()&&(ctrl._cachedOptions=config.get().getActionTabsForPicklist(ctrl.order.selectedPicklistItem))},ctrl._cachedOptions=void 0}],templateUrl:"actions.partial.html"})}()},173:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2").component("ncTreasuryServiceMaintenance",{bindings:{addOrderModalSectionId:"@",authorizedUserSearchSectionId:"@",addAuthorizedUserSectionId:"@",analyzedAccountsSearchSectionId:"@",addAnalyzedAccountSectionId:"@",relationshipId:"@",relationshipName:"@",guid:"@"},controller:["treasuryMaintenance","navigator","maintenanceConfigurationLoader","maintenanceOrder","maintenanceOrderSaver","$q","maintenanceOrderLoader","$routeParams","maintenanceOrderUI","tmScreenSection","store","storeEffects","tmFeatureGuardLoader",function(treasuryMaintenance,navigator,config,MaintenanceOrder,maintenanceOrderSaver,$q,maintenanceOrderLoader,$routeParams,MaintenanceOrderUI,screenSection,store,storeEffects,tmFeatureGuardLoader){var ctrl=this;function isOrderModalDisplayed(){return store.get().isProcessingMaintenanceOrder}function getPropertyAsBoolean(systemProperties,key){return!!systemProperties.hasOwnProperty(key)&&("string"==typeof systemProperties[key]?"true"===systemProperties[key].toLowerCase():systemProperties[key])}ctrl.getAuthorizedUserSearchSectionId=function(){return ctrl.authorizedUserSearchSectionId},ctrl.getAnalyzedAccountSearchSectionId=function(){return ctrl.analyzedAccountSearchSectionId},ctrl.getAddAnalyzedAccountSectionId=function(){return ctrl.addAnalyzedAccountSectionId},ctrl.getGuid=function(){return ctrl.guid},ctrl.getRelationshipId=function(){return ctrl.relationshipId},ctrl.getRelationshipName=function(){return ctrl.relationshipName},ctrl.getBreadcrumbIcon=function(){return config.configProvider.get().breadcrumbIcon},ctrl.deleteOrder=function deleteOrder(){treasuryMaintenance.deleteOrder(store.get().orderStagedForDelete).then(function(){store.dispatch({type:store.types.DELETE_ORDER_COMPLETED}),maintenanceOrderLoader.load(store.get().checklist).then(function(dtos){store.dispatch({type:store.types.MAINTENANCE_ORDER_LOADED_SUCCESS,payload:dtos})}).catch(function(err){treasuryMaintenance.setErrorMessage(err),store.dispatch({type:store.types.MAINTENANCE_ORDER_LOADED_ERROR,payload:err})})}).catch(function(err){treasuryMaintenance.setErrorMessage(err),store.dispatch({type:store.types.DELETE_ORDER_ERROR,payload:err})})},ctrl.getLabel=function getLabel(label){var provider=config.labelProvider.getLabels();provider.hasOwnProperty(label)||console.error(label+" is not a valid label as defined in the label provider");return provider[label]},ctrl.getAddAuthorizedUserSectionId=function getAddAuthorizedUserSectionId(){return ctrl.addAuthorizedUserSectionId},ctrl.getAddAnalyzedAccountSectionId=function getAddAnalyzedAccountSectionId(){return ctrl.addAnalyzedAccountSectionId},ctrl.getAddOrderModalSectionId=function getAddOrderModalSectionId(){return ctrl.addOrderModalSectionId},ctrl.getAddOrderModalContextId=function getAddOrderModalContextId(){var selectedRequirement=store.get().selected;return selectedRequirement===store.constants.PENDING_ORDER?"":selectedRequirement},ctrl.getRoute=function getRoute(){return ctrl.getSelectedMaintenanceOrder().selectedPicklistItem.identity},ctrl.getModalGuid=function getModalGuid(salt,sectionId){return salt+"."+sectionId},ctrl.getSelectedMaintenanceOrder=function getSelectedMaintenanceOrder(){var state=store.get();return state.orders[state.selected]},ctrl.getSelectedService=function getSelectedService(){var order=ctrl.getSelectedMaintenanceOrder();if(void 0!==order&&void 0!==order.selectedMaintenanceService&&void 0!==order.selectedMaintenanceService.identity)return order.selectedMaintenanceService.identity},ctrl.getSelectedScreenSection=function getSelectedScreenSection(){var order=ctrl.getSelectedMaintenanceOrder();if(void 0!==order&&void 0!==order.selectedPicklistItem&&void 0!==order.selectedPicklistItem.screenSections)return Object.keys(order.selectedPicklistItem.screenSections)[0]},ctrl.isAddAnalyzedAccountFormValid=function isAddAnalyzedAccountFormValid(){return screenSection.isValid("analyzed-account."+ctrl.getAddAnalyzedAccountSectionId())},ctrl.isAddAuthorizedUserFormValid=function isAddAuthorizedUserFormValid(){return screenSection.isValid("authorized-user."+ctrl.getAddAuthorizedUserSectionId())},ctrl.isOrderModalDisplayed=isOrderModalDisplayed,ctrl.isDisplayingAddAnalyzedAccountModal=function isDisplayingAddAnalyzedAccountModal(){return store.get().isProcessingAnalyzedAccount},ctrl.isDisplayingAddAuthorizedUserModal=function isDisplayingAddAuthorizedUserModal(){return store.get().isProcessingAuthorizedUser},ctrl.isProcessingDelete=function isProcessingDelete(){return store.get().isProcessingDelete},ctrl.isOrderModalDisplayed=isOrderModalDisplayed,ctrl.isMassActionRendered=function isMassActionRendered(){return!ctrl.isOrderEntryRendered()},ctrl.isOrderEntryRendered=function isOrderEntryRendered(){var order=ctrl.getSelectedMaintenanceOrder();return void 0===order||void 0===order.selectedPicklistItem||!0!==order.selectedPicklistItem.isMassAction},ctrl.onAddOrderLoaded=function onAddOrderLoaded(){var state=store.get();void 0!==state.orders[state.selected].description&&screenSection.populateOrderDescription(ctrl.getAddOrderModalSectionId(),state.orders[state.selected].description,!0)},ctrl.onAnalyzedAccountLoaded=function onAnalyzedAccountLoaded(){var state=store.get();screenSection.populateTreasuryServiceLookup(ctrl.getAddAnalyzedAccountSectionId(),state.orders[state.selected].selectedMaintenanceService.identity)},ctrl.onAuthorizedUserLoaded=function onAuthorizedUserLoaded(){var state=store.get();screenSection.populateTreasuryServiceLookup(ctrl.getAddAuthorizedUserSectionId(),state.orders[state.selected].selectedMaintenanceService.identity)},ctrl.onCancelDeleteOrder=function onCancelDeleteOrder(){store.dispatch({type:store.types.DELETE_ORDER_CANCELED}),treasuryMaintenance.clearMessages()},ctrl.onCancelSaveOrder=function onCancelSaveOrder(){store.dispatch({type:store.types.MAINTENANCE_ORDER_SAVE_CANCEL,payload:{description:screenSection.getFieldValue(ctrl.getAddOrderModalSectionId(),"LLC_BI__Requirement__c_LLC_BI__Description__c")}}),treasuryMaintenance.clearMessages(),screenSection.populateOrderDescription(ctrl.getAddOrderModalSectionId(),"",!1)},ctrl.onCancelAnalyzedAccount=function onCancelAnalyzedAccount(){store.dispatch({type:store.types.ANALYZED_ACCOUNT_SAVE_CANCEL}),treasuryMaintenance.clearMessages()},ctrl.onCancelAuthorizedUser=function onCancelAuthorizedUser(){store.dispatch({type:store.types.AUTHORIZED_USER_SAVE_CANCEL}),treasuryMaintenance.clearMessages()},ctrl.saveAnalyzedAccount=function saveAnalyzedAccount(){screenSection.saveSectionWithConditionalSections(ctrl.getAddAnalyzedAccountSectionId()).then(function(result){store.dispatch({type:store.types.ANALYZED_ACCOUNT_SAVE_SUCCESS})}).catch(function(err){store.dispatch({type:store.types.ANALYZED_ACCOUNT_SAVE_ERROR}),treasuryMaintenance.setErrorMessage(err)})},ctrl.saveAuthorizedUser=function saveAuthorizedUser(){screenSection.saveSectionWithConditionalSections(ctrl.getAddAuthorizedUserSectionId()).then(function(result){store.dispatch({type:store.types.AUTHORIZED_USER_SAVE_SUCCESS})}).catch(function(err){store.dispatch({type:store.types.AUTHORIZED_USER_SAVE_ERROR}),treasuryMaintenance.setErrorMessage(err)})},ctrl.saveMaintenanceOrder=function saveMaintenanceOrder(){var state=store.get(),order=MaintenanceOrder(state.orders[state.selected]),description=screenSection.getFieldValue(ctrl.addOrderModalSectionId,"LLC_BI__Requirement__c_LLC_BI__Description__c");maintenanceOrderSaver.save(order,description,ctrl.relationshipId,state.orders[state.selected].selectedActionTab.identity,state.checklist,state.selected===store.constants.PENDING_ORDER?null:state.selected,ctrl.addOrderModalSectionId).then(function(checklistIdentity){store.dispatch({type:store.types.MAINTENANCE_ORDER_SAVE_SUCCESS,payload:checklistIdentity}),screenSection.populateOrderDescription(ctrl.addOrderModalSectionId,"",!1)}).catch(function(err){treasuryMaintenance.setErrorMessage(err)})},ctrl.saveMaintenanceRequest=function saveMaintenanceRequest(){var state=store.get();treasuryMaintenance.submitMaintenanceRequest(state.checklist).then(function(){navigator.navigateToSObject(ctrl.getRelationshipId(),void 0,void 0,!1)}).catch(function(err){treasuryMaintenance.setErrorMessage(err)})},ctrl.$onInit=function $onInit(){store.create({checklist:$routeParams.checklistId,relationship:ctrl.relationshipId,relationshipName:ctrl.relationshipName,sections:{addOrderModalSectionId:ctrl.addOrderModalSectionId,authorizedUserSearchSectionId:ctrl.authorizedUserSearchSectionId,addAuthorizedUserSectionId:ctrl.addAuthorizedUserSectionId,analyzedAccountsSearchSectionId:ctrl.analyzedAccountsSearchSectionId,addAnalyzedAccountSectionId:ctrl.addAnalyzedAccountSectionId}}),storeEffects.register(),$q.all([config.load(),maintenanceOrderLoader.load($routeParams.checklistId),treasuryMaintenance.getDeleteStatuses(),treasuryMaintenance.retrieveSystemProperties(),treasuryMaintenance.retrieveChecklistStatus($routeParams.checklistId),tmFeatureGuardLoader.load()]).then(function(results){results[0];var maintenanceOrders=results[1],deleteStatuses=results[2],systemProperties=results[3],selectedMaintenanceService=(results[4],config.get().getFirstService()),selectedPicklistItem=config.get().getFirstPicklistForService(selectedMaintenanceService),selectedActionTab=config.get().getFirstActionTabForPicklist(selectedPicklistItem);store.dispatch({type:store.types.SYSTEM_PROPERTIES_LOADED,payload:{enableCarryOverValues:getPropertyAsBoolean(systemProperties,"TM Maintenance-Enable_Data_Carryover"),enableMassActionStandalone:getPropertyAsBoolean(systemProperties,"TM Maintenance-Enable_Mass_Action_Standalone"),requirementStatusesThatCanBeDeleted:(deleteStatuses||"").split(",")}}),store.dispatch({type:store.types.CONFIGURATION_LOADED,payload:{selectedMaintenanceService:selectedMaintenanceService,selectedPicklistItem:selectedPicklistItem,selectedActionTab:selectedActionTab,screenSectionSelections:Object.keys(selectedPicklistItem.screenSections).reduce(function(accum,sectionId){return accum[sectionId+"."+selectedPicklistItem.screenSections[sectionId].configTypes[1]]=[],accum},{})}}),store.dispatch({type:store.types.SHOPPING_CART_GROUP_EXPAND,payload:Object.keys(config.get().getServices())}),maintenanceOrders&&store.dispatch({type:store.types.MAINTENANCE_ORDER_LOADED_SUCCESS,payload:maintenanceOrders})}).catch(function(err){treasuryMaintenance.setErrorMessage(err)})}}],templateUrl:"nc-treasury-service-maintenance.partial.html"})}()},174:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2").component("oneToManySelections",{bindings:{order:"<"},controller:["maintenanceConfigurationLoader","store","treasuryMaintenance",function OneToManySelections(config,store,treasuryMaintenance){var ctrl=this;function isAnalyzedAccountSection(oneToManySection){return-1!==(oneToManySection.configTypes||[]).indexOf("LLC_BI__Analyzed_Account__c")}function isAuthorizedUserSection(oneToManySection){return-1!==(oneToManySection.configTypes||[]).indexOf("LLC_BI__Authorized_User__c")}ctrl.getOneToManyAddLabel=function getOneToManyAddLabel(oneToManySection){if(ctrl.isAnalyzedAccountSection(oneToManySection))return config.labelProvider.getLabels().Add_Analyzed_Account;if(ctrl.isAuthorizedUserSection(oneToManySection))return config.labelProvider.getLabels().Add_Authorized_User},ctrl.getOneToManySections=function getOneToManySections(){if(ctrl._cachedRows)return ctrl._cachedRows;ctrl.order&&ctrl.order.selectedPicklistItem&&(ctrl._cachedRows=ctrl.order.selectedPicklistItem.rows);return ctrl._cachedRows},ctrl.getColumnClass=function getColumnClass(index,first,last,odd,even){if(last&&even)return"col-xs-12";if(last&&odd)return["col-xs-12","col-md-6"];return["col-xs-12","col-md-6"]},ctrl.getContextId=function getContextId(){if(ctrl.order&&ctrl.order.selectedMaintenanceService)return ctrl.order.selectedMaintenanceService.identity},ctrl.getPreselectedRows=function getPreselectedRows(sectionId){var order=ctrl.order||{},key=Object.keys(order.screenSectionSelections).filter(function(sectionIdSObjectTypeCompositeKey){return sectionIdSObjectTypeCompositeKey.split(".")[0]===sectionId});if(key&&0<key.length){var recordIds=order.screenSectionSelections[key];return recordIds}},ctrl.getRelationshipId=function getRelationshipId(){return store.get().relationship},ctrl.getRequirementId=function getRequirementId(){var requirement=ctrl.getSelectedOrderIdentity();return requirement!==store.constants.PENDING_ORDER?requirement:void 0},ctrl.getSelectedOrderIdentity=function getSelectedOrderIdentity(){return store.get().selected},ctrl.isFullRow=function isFullRow(row){return Array.isArray(row)&&1<row.length},ctrl.isOneToManySectionsAvailable=function isOneToManySectionsAvailable(){return Array.isArray(ctrl._cachedRows)&&0!==ctrl._cachedRows.length},ctrl.isProcessing=function isProcessing(oneToManySection){var isJunctionObjectProcessing=!1;ctrl.isAnalyzedAccountSection(oneToManySection)&&(isJunctionObjectProcessing=store.get().isProcessingAnalyzedAccount);ctrl.isAuthorizedUserSection(oneToManySection)&&(isJunctionObjectProcessing=store.get().isProcessingAuthorizedUser);return isJunctionObjectProcessing||store.get().isProcessingMaintenanceOrder},ctrl.isAnalyzedAccountSection=isAnalyzedAccountSection,ctrl.isAuthorizedUserSection=isAuthorizedUserSection,ctrl.onAddOneToMany=function onAddOneToMany(oneToManySection){if(isAnalyzedAccountSection(oneToManySection))return store.dispatch({type:store.types.ANALYZED_ACCOUNT_SAVE});if(isAuthorizedUserSection(oneToManySection))return store.dispatch({type:store.types.AUTHORIZED_USER_SAVE})},ctrl.onSelectedRows=function onSelectedRows(oneToManySection,rows,type,sectionId){void 0===rows||0===Object.keys(rows).length?store.dispatch({type:store.types.ONE_TO_MANY_CLEAR_SELECTION,payload:{identity:oneToManySection.identity,type:type}}):store.dispatch({type:store.types.ONE_TO_MANY_SELECT_RECORD,payload:{identity:oneToManySection.identity,type:type,selections:Object.keys(rows)}})},ctrl.$onChanges=function $onChanges(changes){changes.hasOwnProperty("order")&&void 0!==changes.order.currentValue&&ctrl.order.selectedPicklistItem&&(ctrl._cachedRows=ctrl.order.selectedPicklistItem.rows)},ctrl._cachedRows=void 0,ctrl.onErrorOccuredNg=function onErrorOccuredNg(error){error&&treasuryMaintenance.setErrorMessage(error)},ctrl.onSelectedRowsNg=function onSelectedRowsNg(oneToManySection,$event){var formattedRows=$event.reduce(function(accum,id){return accum[id]=oneToManySection.identity+"."+oneToManySection.configTypes[1],accum},{});void 0===formattedRows||0===Object.keys(formattedRows).length?store.dispatch({type:store.types.ONE_TO_MANY_CLEAR_SELECTION,payload:{identity:oneToManySection.identity,type:oneToManySection.configTypes[1]}}):store.dispatch({type:store.types.ONE_TO_MANY_SELECT_RECORD,payload:{identity:oneToManySection.identity,type:oneToManySection.configTypes[1],selections:Object.keys(formattedRows)}})},ctrl.configTransformerNg=function configTransformerNg(configuration){"LLC_BI__AUTHORIZED_USER__C"===configuration.attributes.sObjectType.toUpperCase()?configuration.attributes.primaryActionLabel=config.labelProvider.getLabels().Add_Authorized_User:"LLC_BI__ANALYZED_ACCOUNT__C"===configuration.attributes.sObjectType.toUpperCase()?configuration.attributes.primaryActionLabel=config.labelProvider.getLabels().Add_Analyzed_Account:configuration.attributes.primaryActionLabel=void 0;return configuration}}],templateUrl:"one-to-many-selections.partial.html"})}()},175:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2").component("oneToManySelectionsTable",{bindings:{contextId:"<",identity:"<",isProcessing:"<",label:"<",onSelectedRows:"&",rows:"<",selected:"<"},controller:["utils","$timeout",function OneToManySelectionsTable(utils,$timeout){var ctrl=this;ctrl.onSelect=function onSelect(rows,type,sectionId){ctrl.onSelectedRows({rows:rows,type:type,sectionId:sectionId})},ctrl.rerender=function rerender(){ctrl.rendered=!1,$timeout(function(){ctrl.rendered=!0})},ctrl.shouldRender=function shouldRender(){return ctrl.rendered},ctrl.$onChanges=function $onChanges(changes){var isMaintenanceOrderSelectionChanging=utils.isChangeFor(changes,"selected")&&!changes.selected.isFirstChange(),isProcessingComplete=utils.isChangeFor(changes,"isProcessing")&&!1===changes.isProcessing.currentValue&&!0===changes.isProcessing.previousValue;(isMaintenanceOrderSelectionChanging||isProcessingComplete)&&ctrl.rerender()},ctrl.rendered=!0}],templateUrl:"one-to-many-selections-table.partial.html"})}()},176:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2").component("orderEntry",{bindings:{dispatch:"<",order:"<"},controller:function OrderEntry(){},templateUrl:"order-entry.partial.html"})}()},177:function(module,exports){angular.module("ncTreasuryServiceMaintenance_v2").component("picklistItemSelector",{bindings:{order:"<"},controller:["maintenanceConfigurationLoader","store","navigator",function(config,store,navigator){var ctrl=this;ctrl.getItems=function getItems(){return ctrl._cachedOptions||config.isLoaded()&&ctrl.order&&ctrl.order.selectedMaintenanceService&&(ctrl._cachedOptions=config.get().getPicklistItemsForService(ctrl.order.selectedMaintenanceService),ctrl.selected=ctrl.order.selectedPicklistItem.identity),ctrl._cachedOptions},ctrl.select=function select(){var picklist=ctrl._cachedOptions.filter(function(picklist){return picklist.identity===ctrl.selected})[0],state=store.get();if(!0===picklist.isMassAction&&!0===state.enableMassActionStandalone){var screenSectionId=Object.keys(picklist.screenSections)[0],relationshipId=state.relationship,serviceId=state.orders[state.selected].selectedMaintenanceService.identity,url=navigator.resolvePageURL("LLC_BI__MassAdd",{id:relationshipId,service:serviceId,section:screenSectionId});ctrl.selected=ctrl.order.selectedPicklistItem.identity,window.open(url,"_blank")}else store.get().selected===store.constants.PENDING_ORDER?store.dispatch({type:store.types.CHANGE_PICKLIST,payload:picklist}):store.dispatch({type:store.types.MAINTENANCE_ORDER_DESELECT})},ctrl.$onChanges=function $onChanges(changes){changes.hasOwnProperty("order")&&void 0!==changes.order.currentValue&&config.isLoaded()&&(ctrl._cachedOptions=config.get().getPicklistItemsForService(ctrl.order.selectedMaintenanceService),ctrl.selected=ctrl.order.selectedPicklistItem.identity)},ctrl.$onInit=function $onInit(){ctrl.order&&ctrl.order.selectedPicklistItem&&(ctrl.selected=ctrl.order.selectedPicklistItem.identity)},ctrl.selected=void 0,ctrl._cachedOptions=void 0}],templateUrl:"picklist-item-selector.partial.html"})},178:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2").component("serviceSelector",{bindings:{order:"<",dispatch:"<"},controller:["maintenanceConfigurationLoader","store",function(config,store){var ctrl=this;ctrl.isSelected=function isSelected(identity){if(ctrl._cacheSelected)return ctrl._cacheSelected===identity;ctrl.order&&ctrl.order.selectedMaintenanceService&&(ctrl._cacheSelected=ctrl.order.selectedMaintenanceService.identity);return ctrl._cacheSelected===identity},ctrl.getItems=function getItems(){if(ctrl._cachedOptions)return ctrl._cachedOptions;if(config.isLoaded()){var services=config.get().getServices();ctrl._cachedOptions=Object.keys(services).map(function(id){return services[id]})}return ctrl._cachedOptions},ctrl.select=function select(item){store.dispatch({type:store.types.CHANGE_SERVICE,payload:item})},ctrl.$onChanges=function $onChanges(changes){changes.hasOwnProperty("order")&&void 0!==changes.order.currentValue&&void 0!==ctrl.order.selectedMaintenanceService&&(ctrl._cacheSelected=ctrl.order.selectedMaintenanceService.identity)},ctrl._cachedOptions=void 0,ctrl._cacheSelected=void 0}],templateUrl:"service-selector.partial.html"})}()},179:function(module,exports){!function(){"use strict";function ShoppingCartOrderGroup(config,store){var ctrl=this;ctrl.isExpanded=function isExpanded(){return-1!==store.get().expandedShoppingCartGroups.indexOf(ctrl.service.identity)},ctrl.isEmpty=function isEmpty(){return void 0===ctrl.orders||0===ctrl.orders.length},ctrl.getDefaultEmptyStateLabel=function getDefaultEmptyStateLabel(){return config.labelProvider.getLabels().Treasury_Service_Maintenance_Request_Default},ctrl.getServiceName=function getServiceName(){return ctrl.service.label},ctrl.toggle=function toggle(){ctrl.isExpanded()?store.dispatch({type:store.types.SHOPPING_CART_GROUP_COLLAPSE,payload:ctrl.service.identity}):store.dispatch({type:store.types.SHOPPING_CART_GROUP_EXPAND,payload:ctrl.service.identity})},ctrl.getOrders=function getOrders(){return ctrl.orders},ctrl.getOrder=function getOrder(identity){return store.get().orders[identity]},ctrl.isShoppingCartItemSelected=function isShoppingCartItemSelected(identity){return store.get().selected===identity}}angular.module("ncTreasuryServiceMaintenance_v2").component("shoppingCartOrderGroup",{bindings:{orders:"<",service:"<"},controller:ShoppingCartOrderGroup,templateUrl:"shopping-cart-order-group.partial.html"}),ShoppingCartOrderGroup.$inject=["maintenanceConfigurationLoader","store"]}()},180:function(module,exports){!function(){"use strict";function ShoppingCartOrder(store,config,treasuryMaintenance){var ctrl=this;ctrl.getStatus=function getStatus(){return ctrl.order.requirementStatus},ctrl.getCardStyle=function getCardStyle(){return ctrl.isSelected()?{"background-color":"#00396B",color:"#fff"}:void 0},ctrl.getStatusStyle=function getStatusStyle(){var uppercase=(ctrl.order.requirementStatus||"").toUpperCase(),scheme=config.configProvider.get().statusToBadgeColors;return void 0===scheme[uppercase]?scheme.OTHER:scheme[uppercase]},ctrl.getLabel=function getLabel(){return ctrl.order.selectedActionTab.label},ctrl.getDescription=function getDescription(){return ctrl.order.description},ctrl.getDeleteIconSrc=function getDeleteIconSrc(){return config.configProvider.get().deleteIcon},ctrl.isSelected=function isSelected(){return ctrl.selected},ctrl.isDeletable=function isDeletable(){return-1!==store.get().requirementStatusesThatCanBeDeleted.indexOf(ctrl.order.requirementStatus)},ctrl.onOrderClicked=function onOrderClicked(){store.dispatch({type:ctrl.selected?store.types.MAINTENANCE_ORDER_DESELECT:store.types.MAINTENANCE_ORDER_SELECT,payload:ctrl.order})},ctrl.onDeleteClicked=function onDeleteClicked(){if(store.get().isProcessingDelete)return;store.dispatch({type:store.types.DELETE_ORDER_CLICKED,payload:ctrl.order})}}angular.module("ncTreasuryServiceMaintenance_v2").component("shoppingCartOrder",{bindings:{order:"<",selected:"<"},controller:ShoppingCartOrder,templateUrl:"shopping-cart-order.partial.html"}),ShoppingCartOrder.$inject=["store","maintenanceConfigurationLoader","treasuryMaintenance"]}()},181:function(module,exports){!function(){"use strict";function ShoppingCart(config,store){var ctrl=this;ctrl.getServiceOrderMapping=function getServiceOrderMapping(service){var state=store.get();if(state.serviceToOrders&&state.serviceToOrders.hasOwnProperty(service.identity))return state.serviceToOrders[service.identity]},ctrl.getAllServices=function getAllServices(){if(config.isLoaded())return config.get().getServices()},ctrl.getShoppingCartLabel=function getShoppingCartLabel(){return config.labelProvider.getLabels().Treasury_Service_Maintenance_Request_Order},ctrl.getShoppingCartActionLabel=function getShoppingCartActionLabel(){if(ctrl.isSubmitButtonEnabled()||""===store.get().checklistStatus||void 0===store.get().checklistStatus)return config.labelProvider.getLabels().Treasury_Service_Maintenance_Request_Submit;return config.labelProvider.getLabels().Treasury_Service_Maintenance_Request_Submitted},ctrl.isShoppingCartEmpty=function isShoppingCartEmpty(){return ctrl._isShoppingCartEmpty},ctrl.isShoppingCartNew=function isShoppingCartNew(){return ctrl.status===config.labelProvider.getLabels().Status_New},ctrl.isSubmitButtonEnabled=function isSubmitButtonEnabled(){return store.get().isMaintenanceRequestAbleToBeSubmitted},ctrl.isExpanded=function isExpanded(serviceId){return-1<(ctrl.expandedGroups||[]).indexOf(serviceId)},ctrl.submit=function submit(){ctrl.onSubmit()},ctrl.getSelectedMaintenanceOrder=function getSelectedMaintenanceOrder(){return ctrl.selectedOrder},ctrl._isShoppingCartEmpty=!0,ctrl._nonPendingOrderGroups=void 0}angular.module("ncTreasuryServiceMaintenance_v2").component("shoppingCart",{bindings:{onSubmit:"&"},controller:ShoppingCart,templateUrl:"shopping-cart.partial.html"}),ShoppingCart.$inject=["maintenanceConfigurationLoader","store"]}()},182:function(module,exports){!function(){"use strict";function TmScreenSectionFormBuilder(screenSection,$timeout,store,utils){var ctrl=this;ctrl.isChangeFor=function isChangeFor(changes,binding){return changes.hasOwnProperty(binding)&&void 0!==changes[binding].currentValue&&!changes[binding].isFirstChange()},ctrl.onPostLoad=function onPostLoad(sectionId,guid,contextId){ctrl.postLoad({sectionId:sectionId,guid:guid,contextId:contextId})},ctrl.onSectionLoaded=function onSectionLoaded(resource){resource.guid===ctrl.guid&&!0===ctrl.inflate&&ctrl.overwrite(resource)},ctrl.shouldRender=function shouldRender(){return ctrl.rendered},ctrl.overwrite=function overwrite(resources){utils.maybeArray(resources).forEach(function(resource){var changedFields=screenSection.overwrite(resource.screenSectionId,ctrl.order.fields);screenSection.evaluate(ctrl.guid),screenSection.publish(resource.screenSectionId,changedFields)})},ctrl.rerender=function rerender(){ctrl.rendered=!1,$timeout(function(){ctrl.rendered=!0},0)},ctrl.$onChanges=function $onChanges(changes){var isReloadableChange=ctrl.isChangeFor(changes,"sectionId")||ctrl.isChangeFor(changes,"guid")||ctrl.isChangeFor(changes,"contextId")||ctrl.isChangeFor(changes,"selected")||ctrl.isChangeFor(changes,"order"),isContextIdBeingRemoved=void 0!==changes.contextId&&void 0!==changes.contextId.previousValue&&void 0===changes.contextId.currentValue;(isReloadableChange||isContextIdBeingRemoved)&&ctrl.rerender();if(ctrl.isChangeFor(changes,"selected")&&ctrl.inflate){var sections=screenSection.getSectionsByGuid(ctrl.guid);ctrl.overwrite(sections)}},ctrl.$onDestroy=function $onDestroy(){screenSection.unsubscribe(ctrl.onSectionLoaded)},ctrl.$onInit=function $onInit(){if(screenSection.subscribe(ctrl.onSectionLoaded),ctrl.inflate){var sections=screenSection.getSectionsByGuid(ctrl.guid);ctrl.overwrite(sections)}},ctrl.rendered=!0}angular.module("ncTreasuryServiceMaintenance_v2").component("tmScreenSectionFormBuilder",{bindings:{sectionId:"<",guid:"<",contextId:"<",order:"<",selected:"<",inflate:"<",postLoad:"&"},controller:TmScreenSectionFormBuilder,templateUrl:"tm-screen-section-form-builder.partial.html"}),TmScreenSectionFormBuilder.$inject=["tmScreenSection","$timeout","store","utils"]}()},183:function(module,exports){!function(){"use strict";function ItemOverflow($window,$timeout){return{restrict:"C",require:"^menuOverflow",link:function(scope,element,attrs,ctrl){ctrl.process(element,scope.$index)}}}angular.module("ncTreasuryServiceMaintenance_v2").directive("itemOverflow",ItemOverflow),ItemOverflow.$inject=["$window","$timeout"]}()},184:function(module,exports){!function(){"use strict";function MenuOverflow($window,$timeout){return{restrict:"C",controller:function(){var ctrl=this;ctrl.getItemsBoundry=function getItemsBoundry(){return _itemsBoundry},ctrl.getMenuBoundry=function getMenuBoundry(){return _menuBoundry},ctrl.getOverflowControlBoundry=function getOverflowControlBoundry(){return _overflowControlBoundry},ctrl.hideOverflowControl=function hideOverflowControl(){angular.element(".overflow-control").hide()},ctrl.isOverflow=function isOverflow(){return _menuBoundry<_overflowControlBoundry+_itemsBoundry},ctrl.onDropdownItemHide=function onDropdownItemHide(elementId){angular.element([".overflow-control #",elementId].join("")).hide()},ctrl.onDropdownItemShow=function onDropdownItemShow(elementId){angular.element([".overflow-control #",elementId].join("")).show()},ctrl.onItemAdded=function onItemAdded(itemBoundry){_itemsBoundry+=itemBoundry},ctrl.process=function process(element,index){$timeout(function(){0===index&&(_itemsBoundry=0),ctrl.onItemAdded(element.outerWidth()),ctrl.isOverflow()?(element.hide(),ctrl.showOverflowControl(),ctrl.onDropdownItemShow(element.attr("id"))):(element.show(),ctrl.hideOverflowControl(),ctrl.onDropdownItemHide(element.attr("id")))})},ctrl.resize=function resize(element,scope){function onResize(){ctrl.rerender(element)}angular.element($window).on("resize",onResize),scope.$on("$destroy",function onResized(){angular.element($window).off("resize",onResize)})},ctrl.render=function render(element){onReady(element)},ctrl.onReady=onReady,ctrl.rerender=function rerender(element){ctrl.render(element),ctrl.setItemsBoundry(0),angular.element(".menu-overflow").find(".item-overflow").each(function(index,item){ctrl.process(angular.element(item))})},ctrl.setItemsBoundry=function setItemsBoundry(itemsBoundry){_itemsBoundry=itemsBoundry},ctrl.setMenuBoundry=function setMenuBoundry(menuBoundry){_menuBoundry=menuBoundry},ctrl.setOverflowControlBoundry=function setOverflowControlBoundry(overflowControlBoundry){_overflowControlBoundry=overflowControlBoundry};ctrl.showOverflowControl=function showOverflowControl(){angular.element(".overflow-control").show()};var _itemsBoundry=0,_menuBoundry=0,_overflowControlBoundry=0;function onReady(element){ctrl.setMenuBoundry(element.outerWidth()),ctrl.setOverflowControlBoundry(element.find(".overflow-control").last().outerWidth())}},link:function(scope,element,attrs,ctrl){ctrl.render(element),ctrl.resize(element,scope)}}}angular.module("ncTreasuryServiceMaintenance_v2").directive("menuOverflow",MenuOverflow),MenuOverflow.$inject=["$window","$timeout"]}()},185:function(module,exports){!function(){"use strict";function ActionTabFactory(ConfiguredScreenSection){var factory=this;return factory._processDto=function processDto(dto){var actionTab={};return actionTab.identity=dto.identity,actionTab.label=dto.label,actionTab.app=dto.app,actionTab.picklist=dto.picklist,actionTab.screen=dto.screen,actionTab.screenSections=dto.screenSections,actionTab.order=dto.order,actionTab.screenSections=Object.keys(dto.screenSections).map(function(sectionId){return ConfiguredScreenSection(dto.screenSections[sectionId])}),actionTab},function create(dto){return factory._processDto(dto)}}angular.module("ncTreasuryServiceMaintenance_v2").factory("actionTab",ActionTabFactory),ActionTabFactory.$inject=["configuredScreenSection"]}()},186:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2").factory("configuredScreenSection",function ConfiguredScreenSectionFactory(){return function create(dto){return{identity:dto.identity,label:dto.label,type:dto.type,configTypes:dto.configTypes,resourceType:dto.resourceType,addModalSupported:dto.addModalSupported,order:dto.order}}})}()},187:function(module,exports){!function(){"use strict";function FieldWrapperFactory(fieldType){return function create(fieldConfigData,field){var isReadOnly=field.isCalculated;return fieldConfigData.contextId&&!1===field.isCalculated&&(isReadOnly=!fieldConfigData.fieldConfigIsEditable),{isReadOnly:isReadOnly,scale:field.scale,displayValue:field.displayValue||"",fieldLabel:field.fieldLabel,fieldName:field.fieldName,fieldType:field.fieldType,isDirty:field.isDirty,guid:field.guid,objType:field.contextIdentifier,value:function getFieldValueWithFieldTypeDefaults(field){return fieldType.isCheckBox(field.fieldType)?field.value:function getValueNumeric(field){if(void 0!==field.value&&function isNumeric(field){var fType=field.fieldType;return!!(fieldType.isInteger(fType)||fieldType.isDouble(fType)||fieldType.isCurrency(fType)||fieldType.isPercent(fType))}(field))return field.value;return field.value||""}(field)}(field),referenceFieldPath:field.referenceFieldPath}}}angular.module("ncTreasuryServiceMaintenance_v2").factory("fieldWrapper",FieldWrapperFactory),FieldWrapperFactory.$inject=["fieldType"]}()},188:function(module,exports){!function(){"use strict";function MaintenanceConfigurationFactory(MaintenanceService,PicklistItem,ActionTab){var factory=this;return factory._processDto=function processDto(dto){var maintenanceConfigurationDto={};return maintenanceConfigurationDto.services=Object.keys(dto.services).reduce(function reduce(accum,curr){return accum[curr]=MaintenanceService(dto.services[curr]),accum},{}),maintenanceConfigurationDto.picklistItems=Object.keys(dto.picklistItems).reduce(function reduce(accum,curr){return accum[curr]=sortByOrder(dto.picklistItems[curr]).map(PicklistItem),accum},{}),maintenanceConfigurationDto.actionTabs=Object.keys(dto.actionTabs).reduce(function reduce(accum,curr){for(var key in accum[curr]=sortByOrder(dto.actionTabs[curr]).map(ActionTab),accum[curr]){var screenSections=accum[curr][key].screenSections;null!=screenSections&&0<screenSections.length&&sortByOrder(accum[curr][key].screenSections)}return accum},{}),maintenanceConfigurationDto},factory._alphabeticallySortByLabel=function alphabeticallySortByLabel(a,b){return a.label.toLowerCase().localeCompare(b.label.toLowerCase())},function create(dto){var maintenanceConfiguration=factory._processDto(dto);return maintenanceConfiguration.getServices=getServices,maintenanceConfiguration.getServiceByIdentity=getServiceByIdentity,maintenanceConfiguration.getPicklistItemByIdentity=getPicklistItemByIdentity,maintenanceConfiguration.getActionTabByIdentity=getActionTabByIdentity,maintenanceConfiguration.getPicklistItemsForService=getPicklistItemsForService,maintenanceConfiguration.getActionTabsForPicklist=getActionTabsForPicklist,maintenanceConfiguration.getFirstService=getFirstService,maintenanceConfiguration.getFirstPicklistForService=getFirstPicklistForService,maintenanceConfiguration.getFirstActionTabForPicklist=getFirstActionTabForPicklist,maintenanceConfiguration};function getServices(){return this.services}function getPicklistItemByIdentity(identity){var match,that=this;return Object.keys(this.picklistItems).forEach(function(groupApp){match||(match=that.picklistItems[groupApp].filter(function(picklistItem){return picklistItem.identity===identity})[0])}),match}function getActionTabByIdentity(picklistItemIdentity,actionTabIdentity){var matchingActionTabs=this.actionTabs[picklistItemIdentity].filter(function(actionTab){return actionTab.identity===actionTabIdentity});return matchingActionTabs.length?matchingActionTabs[0]:void 0}function getServiceByIdentity(identity){return this.services[identity]}function getPicklistItemsForService(service){if(this.picklistItems)return this.picklistItems[service.groupApp]}function getActionTabsForPicklist(picklist){if(this.actionTabs)return this.actionTabs[picklist.identity]}function getFirstService(){if(this.services){var that=this;return Object.keys(this.services).map(function(serviceId){return that.services[serviceId]}).sort(factory._alphabeticallySortByLabel)[0]}}function getFirstPicklistForService(service){if(void 0!==this.picklistItems)try{return this.picklistItems[service.groupApp][0]}catch(err){throw err.message="No picklist items were loaded for service with id "+service.identity+": "+err.message,err}}function getFirstActionTabForPicklist(picklist){if(void 0!==this.picklistItems&&!0!==picklist.isMassAction)try{return this.actionTabs[picklist.identity][0]}catch(err){throw err.message="No action tabs were loaded for picklist item with id "+picklist.identity+": "+err.message,err}}function sortByOrder(list){return list.sort(function(a,b){return a.order>b.order?1:-1})}}angular.module("ncTreasuryServiceMaintenance_v2").factory("maintenanceConfiguration",MaintenanceConfigurationFactory),MaintenanceConfigurationFactory.$inject=["maintenanceService","picklistItem","actionTab"]}()},189:function(module,exports){!function(){"use strict";function MaintenanceOrderFactory(screenSection,FieldWrapper){var factory=this;return factory._processOrderFields=function processOrderFields(order){return screenSection.getFields(order).map(function(field){var fieldConfigData=screenSection.screenSection.getFieldConfigurationData(field);return FieldWrapper(fieldConfigData,field)})},factory._processActionTabTypes=function processActionTabTypes(actionTab){return Object.keys(actionTab.screenSections).map(function(sectionId){return actionTab.screenSections[sectionId].type})},function create(order){return{parentContextName:order.selectedMaintenanceService.label,parentContextId:order.selectedMaintenanceService.identity,fields:factory._processOrderFields(order),contextSObjectTypes:factory._processActionTabTypes(order.selectedActionTab),options:[order.selectedPicklistItem.identity,order.selectedActionTab.identity],screenSectionSelections:order.screenSectionSelections}}}angular.module("ncTreasuryServiceMaintenance_v2").factory("maintenanceOrder",MaintenanceOrderFactory),MaintenanceOrderFactory.$inject=["tmScreenSection","fieldWrapper"]}()},190:function(module,exports){!function(){"use strict";function MaintenanceOrderUIFactory(fieldType){return function create(order,configuration){var selectedMaintenanceService=configuration.getServiceByIdentity(order.parentContextId),selectedPicklistItem=configuration.getPicklistItemByIdentity(order.options[0]),selectedActionTab=configuration.getActionTabByIdentity(order.options[0],order.options[1]);!function processFields(fields){(fields||[]).forEach(function(field){fieldType.isCheckBox(field.fieldType)&&"string"==typeof field.value&&("true"===field.value?field.value=!0:"false"===field.value?field.value=!1:field.value="")})}(order.fields);var ui={selectedMaintenanceService:selectedMaintenanceService,selectedPicklistItem:selectedPicklistItem,selectedActionTab:selectedActionTab};return _.extend(ui,order)}}angular.module("ncTreasuryServiceMaintenance_v2").factory("maintenanceOrderUI",MaintenanceOrderUIFactory),MaintenanceOrderUIFactory.$inject=["fieldType"]}()},191:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2").factory("maintenanceService",function MaintenanceServiceFactory(){return function create(service){var maintenanceService={};return maintenanceService.identity=service.identity,maintenanceService.label=service.label,maintenanceService.app=service.app,maintenanceService.groupApp=service.groupApp,maintenanceService.order=service.order,maintenanceService}})}()},192:function(module,exports){!function(){"use strict";function PicklistItemFactory(ConfiguredScreenSection){var factory=this;return factory._processDto=function processDto(dto){var picklistItem={};return picklistItem.identity=dto.identity,picklistItem.label=dto.label,picklistItem.app=dto.app,picklistItem.screen=dto.screen,picklistItem.isMassAction=dto.isMassAction,picklistItem.picklistType=dto.picklistType,picklistItem.screenSections=Object.keys(dto.screenSections).map(function(sectionId){return dto.screenSections[sectionId]}).reduce(function(accum,curr){return accum[curr.identity]=ConfiguredScreenSection(curr),accum},{}),picklistItem.rows=function bucketIntoRows(picklistItem){var sectionIds=Object.keys(picklistItem.screenSections);return 0!==sectionIds.length?sectionIds.reduce(function(accum,sectionId){var section=picklistItem.screenSections[sectionId];return accum=accum.concat(section)},[]):[]}(picklistItem),picklistItem},function create(dto){return factory._processDto(dto)}}angular.module("ncTreasuryServiceMaintenance_v2").factory("picklistItem",PicklistItemFactory),PicklistItemFactory.$inject=["configuredScreenSection"]}()},193:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2").provider("treasuryMaintenanceRemoting",function TreasuryMaintenanceRemoting(){var self=this;self.endpoints={},self.$get=function($q){return{remoting:function(action,params){var deferred=$q.defer();return Visualforce.remoting.Manager.invokeAction(self.endpoints.remoteAction,action,params,function(result,event){event.status?deferred.resolve(result,event):deferred.reject(event.message)},{escape:!1,buffer:!1}),deferred.promise}}},self.setEndpoint=function(endpoint){self.endpoint=angular.merge(self.endpoints,endpoint)}})}()},194:function(module,exports){!function(){"use strict";function TreasuryForms(screenSection,config,formConstants,screenSectionFormBuilderRemoting,treasuryMaintenanceRemoting,$q,fieldType,treasuryFieldCache){var service=this,namespace=config.get().namespace,enableCarryoverValues=!1;service.applyNamespace=function applyNamespace(item){return[namespace,"__",item].join("")},service.applyNamespaceDeep=function applyNamespaceDeep(obj,field){return[namespace,"__",obj,"_",namespace,"__",field].join("")},service.captureOriginalValues=function captureOriginalValues(screenSectionId){service.retrieveFields(screenSectionId).forEach(function(field){field.$$originalValue=field.value,field.$$originalDisplayValue=field.displayValue,enableCarryoverValues&&(field.value=getCachedValue(field),field.value!=field.$$originalValue&&(field.isDirty=!0))})},service.clearConditionalScreenSectionValues=function clearConditionalScreenSectionValues(screenSectionId){service.getLoadedConditionalScreenSections(screenSectionId).forEach(function(section){service.clearScreenSectionValues(section.screenSectionId)})},service.clearOrder=function clearOrder(order){Object.keys(order.options).forEach(function(screenSectionId){service.clearScreenSectionValues(screenSectionId),service.clearConditionalScreenSectionValues(screenSectionId),service.evaluateConditionalSections(screenSectionId)})},service.clearScreenSectionValues=function clearScreenSectionValues(screenSectionId){service.setBulkFieldValues(screenSectionId,{value:void 0,displayValue:void 0,isDirty:!1})},service.containsField=containsField,service.containsFieldWithValue=function containsFieldWithValue(propertyBag,field){return containsField(propertyBag,field)&&propertyBag[field.guid].value===field.value},service.convertListToGuidMap=function convertListToGuidMap(fieldsOrResources){return fieldsOrResources.reduce(function(accum,current){return accum[current.guid]=current,accum},{})},service.convertValuesToDisplay=function convertValuesToDisplay(field){if(fieldType.isCheckBox(field.fieldType)&&"string"==typeof field.value)return"true"===field.value||"false"!==field.value&&"";return field.value},service.deselectRow=function deselectRow(row){angular.extend(row,{isChecked:!1})},service.deselectRows=function deselectRows(rows){rows.forEach(function(row){service.deselectRow(row)})},service.evaluateConditionalSections=function evaluateConditionalSections(screenSectionId){var screenResource=screenSection.get(screenSectionId);screenResource&&screenSection.evaluateConditionalSections(screenResource.guid)},service.getCachedValue=getCachedValue,service.getFieldValueWithFieldTypeDefaults=getFieldValueWithFieldTypeDefaults,service.getLoadedConditionalScreenSections=function getLoadedConditionalScreenSections(screenSectionId){var screenResource=screenSection.get(screenSectionId),conditionalScreenResources=[];screenResource&&screenResource.conditionalScreenSections.forEach(function(section){var conditionalScreenResource=screenSection.get(section.conditionalSectionId);conditionalScreenResource&&conditionalScreenResources.push(conditionalScreenResource)});return conditionalScreenResources},service.getSearchResultsCopy=screenSectionFormBuilderRemoting.getSearchResults.bind({}),service.isField=function isField(field,fieldName){return fieldName&&service.isFieldName(field)&&-1!==field.fieldName.toLowerCase().lastIndexOf(fieldName.toLowerCase())},service.isFieldName=function isFieldName(field){return field&&field.hasOwnProperty("fieldName")},service.isTreasuryServiceLookupField=function isTreasuryServiceLookupField(field){return service.isField(field,formConstants.TREASURY_SERVICE_LOOKUP)},service.isTreasuryServiceReferenceLookupField=function isTreasuryServiceReferenceLookupField(field){return service.isField(field,formConstants.TREASURY_SERVICE_LOOKUP_REF)},service.mapFieldsToWrappers=function mapFieldsToWrappers(fields){return fields.map(function(field){return{fieldName:field.fieldName,fieldLabel:field.fieldLabel,fieldType:field.fieldType,value:getFieldValueWithFieldTypeDefaults(field),displayValue:field.displayValue||_constants.NO_CHANGE_FIELD_VALUE,objType:field.contextIdentifier,guid:field.guid,scale:field.scale||null,originalValue:field.$$originalValue,originalDisplayValue:field.$$originalDisplayValue,isReadOnly:field.isReadOnly}})},service.mapSelectedResourcesToWrappers=function mapSelectedResourcesToWrappers(resources,idGuid,displayGuid){return resources.filter(function(rows){return!0===rows.isChecked}).map(function(selectedRows){var fieldWrapper={};return selectedRows.propertyBag[idGuid]&&(fieldWrapper.fieldName=selectedRows.propertyBag[idGuid].fieldName,fieldWrapper.fieldLabel=selectedRows.propertyBag[idGuid].fieldLabel,fieldWrapper.fieldType=selectedRows.propertyBag[idGuid].fieldType,fieldWrapper.value=selectedRows.propertyBag[idGuid].value,fieldWrapper.objType=selectedRows.propertyBag[idGuid].contextIdentifier,fieldWrapper.guid=selectedRows.propertyBag[idGuid].guid),selectedRows.propertyBag[displayGuid]&&(fieldWrapper.displayValue=selectedRows.propertyBag[displayGuid].value),fieldWrapper})},service.modifyField=function modifyField(field,valueMap){valueMap&&""!==valueMap.value&&angular.extend(field,valueMap)},service.modifyFields=function modifyFields(fields,guidFieldMap){fields.forEach(function(field){guidFieldMap[field.guid]&&service.modifyField(field,{value:service.convertValuesToDisplay(guidFieldMap[field.guid]),displayValue:guidFieldMap[field.guid].displayValue,isDirty:!0})})},service.processScreenSection=function processScreenSection(screenSectionId,processedResourceOptions){processedResourceOptions=processedResourceOptions||{};for(var screenResource=screenSection.get(screenSectionId),conditionalScreenResources=service.getLoadedConditionalScreenSections(screenSectionId),i=0;i<conditionalScreenResources.length;i++)service.processScreenSection(conditionalScreenResources[i].screenSectionId,processedResourceOptions);var propertyBag=screenSection.getPropertyBag(screenResource.screenSectionId);return processedResourceOptions[screenResource.screenSectionId]=service.mapFieldsToWrappers(propertyBag),processedResourceOptions},service.resumeEditingOptions=function resumeEditingOptions(order,section){if(order.options[section.screenSectionId]){var guidFieldMap=service.convertListToGuidMap(order.options[section.screenSectionId]),screenSectionFields=screenSection.getPropertyBag(section.screenSectionId)||[];service.modifyFields(screenSectionFields,guidFieldMap)}},service.resumeEditingSelections=function resumeEditingSelections(orderSelections,rows){orderSelections.forEach(function(fieldWrapper){rows.forEach(function(row){service.selectRowByContainingField(row,fieldWrapper)})})},service.resetSearchResultsEndpoint=function resetSearchResultsEndpoint(){screenSectionFormBuilderRemoting.getSearchResults=service.getSearchResultsCopy},service.retrieveFields=function retrieveFields(sectionId){return screenSection.getPropertyBag(sectionId)||[]},service.retrieveFieldByName=function retrieveFieldByName(sectionId,fieldName){var matches=service.retrieveFields(sectionId).filter(function(field){return service.isField(field,fieldName)});return 0<matches.length?matches[0]:void 0},service.retrieveFieldValueByName=function retrieveFieldValueByName(sectionId,fieldName){var match=service.retrieveFieldByName(sectionId,fieldName);return match?match.value:match},service.selectRow=function selectRow(row){angular.extend(row,{isChecked:!0})},service.selectRows=function selectRows(rows){rows.forEach(function(row){service.selectRow(row)})},service.selectRowByContainingField=function selectRowByContainingField(row,field){service.containsFieldWithValue(row.propertyBag,field)&&service.selectRow(row)},service.setBulkFieldValues=function setBulkFieldValues(screenSectionId,configuration){var fields=_.values(screenSection.getPropertyBagObject(screenSectionId));return fields.forEach(function(field){angular.extend(field,configuration)}),fields},service.setSearchResultsEndpoint=function setSearchResultsEndpoint(endpoint,accountId,treasuryServiceId){screenSectionFormBuilderRemoting.getSearchResults=function getSearchResults(screenResource){function getSearchResults(searchResults){return searchResults.filter(function(resource){if(resource.propertyBag)return function filterPropertyBag(propertyBag){for(var key in propertyBag)"ID"===propertyBag[key].fieldType&&(propertyBag[key].isVisible=!1)}(resource.propertyBag),resource})}var params={terms:_.values(screenResource.propertyBag)[0].displayValue,accountId:accountId,treasuryServiceId:treasuryServiceId},deferred=$q.defer();return treasuryMaintenanceRemoting.remoting(endpoint,params).then(function resolve(searchResults){searchResults&&0<searchResults.length&&(screenResource.children=getSearchResults(searchResults));deferred.resolve(screenResource,event)},function reject(error){deferred.reject(error)}),deferred.promise}},service.setEnableCarryoverValues=function setEnableCarryoverValues(newValue){enableCarryoverValues=newValue};var _constants=Object.freeze({NO_CHANGE_FIELD_VALUE:""});function getCachedValue(field){return treasuryFieldCache.contains(field.guid)?treasuryFieldCache.retrieveField(field.guid).value:field.value}function containsField(propertyBag,field){return!!propertyBag[field.guid]}function getFieldValueWithFieldTypeDefaults(field){return fieldType.isCheckBox(field.fieldType)?field.value:function getValueNumeric(field){if(void 0!==field.value&&function isNumeric(field){var fType=field.fieldType;return!!(fieldType.isInteger(fType)||fieldType.isDouble(fType)||fieldType.isCurrency(fType)||fieldType.isPercent(fType))}(field))return field.value;return field.value||_constants.NO_CHANGE_FIELD_VALUE}(field)}}angular.module("ncTreasuryServiceMaintenance_v2").service("treasuryForms",TreasuryForms),TreasuryForms.$inject=["screenSection","config","formConstants","screenSectionFormBuilderRemoting","treasuryMaintenanceRemoting","$q","fieldType","treasuryFieldCache"],angular.module("ncTreasuryServiceMaintenance_v2").constant("formConstants",{BOOLEAN_FIELD_TYPE:"BOOLEAN",TREASURY_SERVICE_LOOKUP:"treasury_service__c",TREASURY_SERVICE_LOOKUP_REF:"treasury_service_reference__c"})}()},195:function(module,exports){!function(){"use strict";function TreasuryMaintenance($routeParams,treasuryMaintenanceRemoting,messageService,screenSection,$q){var self=this;self.getTreasuryServiceIds=function(){return $routeParams.treasuryIds},self.getChecklistId=function(){return void 0===$routeParams.checklistId?"":$routeParams.checklistId},self.retrieveTreasuryServices=function(){return treasuryMaintenanceRemoting.remoting("LLC_BI.TreasuryMaintenanceDataService.RetrieveTreasuryServices",{treasuryIds:self.getTreasuryServiceIds()})},self.retrieveTreasuryServicesSystemProperties=function(){return treasuryMaintenanceRemoting.remoting("LLC_BI.TreasuryMaintenanceDataService.RetrieveTreasurySystemProperties",null)},self.retrieveTreasuryServiceActions=function(treasuryServiceMaintenanceApps){return treasuryMaintenanceRemoting.remoting("LLC_BI.TreasuryMaintenanceDataService.RetrieveTreasuryServiceActions",{app:treasuryServiceMaintenanceApps})},self.retrieveTreasuryMaintenanceOrders=function(checklistId){return treasuryMaintenanceRemoting.remoting("LLC_BI.TreasuryMaintenanceDataService.RetrieveTreasuryMaintenanceOrder",{checklistId:checklistId})},self.createChecklist=function(contextId){return treasuryMaintenanceRemoting.remoting("LLC_BI.TreasuryMaintenanceDataService.CreateMaintenanceChecklist",{relationshipId:contextId})},self.retrieveSystemProperties=function(){return treasuryMaintenanceRemoting.remoting("LLC_BI.TreasuryMaintenanceDataService.RetrieveTreasurySystemProperties",{})},self.retrieveAuthorizedUsers=function(sectionId,guid,contextId){return screenSection.loadData(sectionId,guid,contextId,!1)},self.getAuthorizedUsers=function(sectionId){return screenSection.getChildren(sectionId)||[]},self.retrieveAnalyzedAccounts=function(sectionId,guid,contextId){return screenSection.loadData(sectionId,guid,contextId,!1)},self.getAnalyzedAccounts=function(sectionId){return screenSection.getChildren(sectionId)||[]},self.getFields=function(resource){for(var propertyBag=screenSection.filterPropertyBag(resource.propertyBag),i=0,j=propertyBag.length;i<j;i++){var field=propertyBag[i];field&&!field.isVisible&&propertyBag.splice(i,1)}return propertyBag},self.setErrorMessage=function(err){err.hasOwnProperty("message")?self.setMessage(err.message,"error"):self.setMessage(err,"error")},self.setMessage=function(message,type){messageService.setMessage({type:messageService.messageTypes[type],text:message},!0)},self.clearMessages=function(){messageService.clear()},self.saveTreasuryMaintenanceOrder=function(serializedOrder){return treasuryMaintenanceRemoting.remoting("LLC_BI.TreasuryMaintenanceDataService.SaveMaintenanceOrder",{order:serializedOrder})},self.submitMaintenanceRequest=function(checklist){return treasuryMaintenanceRemoting.remoting("LLC_BI.TreasuryMaintenanceDataService.SubmitMaintenanceRequest",{checklistId:checklist})},self.retrieveChecklistStatus=function(checklistId){if(void 0!==checklistId&&""!==checklistId)return treasuryMaintenanceRemoting.remoting("LLC_BI.TreasuryMaintenanceDataService.RetrieveChecklistStatus",{checklistId:checklistId})},self.deleteOrder=function(orderId){return treasuryMaintenanceRemoting.remoting("LLC_BI.TreasuryMaintenanceDataService.DeleteOrder",{order:orderId})},self.getDeleteStatuses=function(){return treasuryMaintenanceRemoting.remoting("LLC_BI.TreasuryMaintenanceDataService.RetrieveDeleteStatuses",{})}}angular.module("ncTreasuryServiceMaintenance_v2").service("treasuryMaintenance",TreasuryMaintenance),TreasuryMaintenance.$inject=["$routeParams","treasuryMaintenanceRemoting","messageService","screenSection","$q"]}()},196:function(module,exports){!function(){"use strict";function MaintenanceConfigurationLoader(apex,MaintenanceConfiguration,$routeParams,config,label){var service=this;service.load=function load(){return service._fetch().then(service._process)},service.get=function get(){return service._configuration},service.isLoaded=function isLoaded(){return service._loaded},service.configProvider=config,service.labelProvider=label,service._fetch=function fetch(identities){return identities=identities||$routeParams.treasuryIds.split(","),apex.remoting("LLC_BI.MaintenanceConfigurationsLoaderRemote.Load",{args:JSON.stringify({filters:{identities:identities}})})},service._process=function process(dto){return service._configuration=MaintenanceConfiguration(dto),service._loaded=!0,service._configuration},service._configuration=void 0,service._loaded=!1}angular.module("ncTreasuryServiceMaintenance_v2").service("maintenanceConfigurationLoader",MaintenanceConfigurationLoader),MaintenanceConfigurationLoader.$inject=["treasuryMaintenanceRemoting","maintenanceConfiguration","$routeParams","config","label"]}()},197:function(module,exports){!function(){"use strict";function MaintenanceOrderLoader(apex,$routeParams){this.load=function load(identity){return void 0!==(identity=identity||$routeParams.checklistId)?apex.remoting("LLC_BI.MaintenanceOrdersLoaderRemote.Load",{args:JSON.stringify({filters:{identities:[identity]}})}):void 0}}angular.module("ncTreasuryServiceMaintenance_v2").service("maintenanceOrderLoader",MaintenanceOrderLoader),MaintenanceOrderLoader.$inject=["treasuryMaintenanceRemoting","$routeParams"]}()},198:function(module,exports){!function(){"use strict";function MaintenanceOrderSaver(apex,screenSection,$q){this.save=function save(order,description,context,actionTabIdentity,checklistIdentity,requirementIdentity,sectionId){var deferred=$q.defer();return apex.remoting("LLC_BI.MaintenanceOrderSaverRemote.Save",{args:JSON.stringify({actionTabIdentity:actionTabIdentity,checklistIdentity:checklistIdentity,context:context,description:description,order:order,requirementIdentity:requirementIdentity,serviceIdentity:order.parentContextId})}).then(function(maintenanceOrderSaverResult){screenSection.patchRequirementPropertyBag(sectionId,maintenanceOrderSaverResult.requirementIdentity,maintenanceOrderSaverResult.checklistIdentity),screenSection.saveSectionWithConditionalSections(sectionId).then(function(){deferred.resolve(maintenanceOrderSaverResult.checklistIdentity)}).catch(function(err){deferred.reject(err)})}),deferred.promise}}angular.module("ncTreasuryServiceMaintenance_v2").service("maintenanceOrderSaver",MaintenanceOrderSaver),MaintenanceOrderSaver.$inject=["treasuryMaintenanceRemoting","tmScreenSection","$q"]}()},199:function(module,exports){!function(){"use strict";function TmScreenSectionService(screenSection,formBuilder,$q,apex,screenSectionFormBuilderRemoting,fieldType,picklistService,utils){var service=this;service.compositeSelectionKey=function compositeSelectionKey(sectionId,sectionType){return sectionId+"."+sectionType},service.evaluate=function evaluate(guids){utils.maybeArray(guids).forEach(function(guid){service.screenSection.evaluateConditionalSections(guid)})},service.evaluateConditionalSections=function evaluateConditionalSections(order){(service.generateGuids(order)||[]).forEach(function(guid){service.screenSection.evaluateConditionalSections(guid)})},service.getFieldValue=function getFieldValue(sectionId,target){if(void 0!==screenSection.get(sectionId)){var propertyBag=screenSection.getPropertyBagObject(sectionId),field=propertyBag[target]||{};return field.value}},service.guid=function guid(picklist,action,sectionId){return picklist.identity+"."+action.identity+"."+sectionId},service.getFields=function getFields(order){return service.generateGuids(order).filter(function(guid){return void 0!==formBuilder.fields[guid]}).map(function(guid){return formBuilder.getFields(guid)}).reduce(function(accum,fields){return accum.concat(fields)},[])||[]},service.getFieldsAsMap=function getFieldsAsMap(order){return(service.getFields(order)||[]).reduce(function(accum,field){return accum[field.guid]=field,accum},{})},service.generateGuids=function generateGuids(order){return order.selectedActionTab.screenSections.map(function(section){return service.guid(order.selectedPicklistItem,order.selectedActionTab,section.identity)})},service.getConditionalSections=function getConditionalSections(guids){return _.values(utils.maybeArray(guids).reduce(function(accum,guid){var resources=service.getSectionsByGuid(guid),conditionals=utils.maybeArray(resources).reduce(function(collection,resource){var isSectionDrivingConditionalSections=void 0!==resource.conditionalScreenSections&&0<resource.conditionalScreenSections.length;return isSectionDrivingConditionalSections&&resource.conditionalScreenSections.forEach(function(conditional){var section=service.screenSection.get(conditional.conditionalSectionId);section&&collection.push(section)}),collection},[]);return conditionals.forEach(function(resource){accum[resource.screenSectionId]=resource}),accum},{}))},service.getSectionsByGuid=function getSectionsByGuid(guid){return Object.keys(service.screenSection.screenSections).map(function(sectionId){return service.screenSection.screenSections[sectionId]}).filter(function(resource){return resource.guid===guid})},service.overwriteDisplayedFields=function overwriteDisplayedFields(order){var sources=order.fields,targets=service.getFields(order);service.updateFieldValues(sources,targets)},service.clearDisplayedFields=function clearDisplayedFields(order){service.getFields(order).forEach(function(field){service.updateFieldValue({displayValue:void 0,value:void 0,isDirty:!1},field)})},service.clearFields=function clearFields(guids){guids.filter(function(guid){return void 0!==formBuilder.fields[guid]}).map(function(guid){return formBuilder.getFields(guid)}).reduce(function(accum,fields){return accum.concat(fields)},[]).forEach(function(field){service.updateFieldValue({displayValue:void 0,value:void 0,isDirty:!1},field)})},service.isLoaded=function isLoaded(sectionId){return void 0!==screenSection.get(sectionId)},service.isValid=function isValid(guid){return screenSection.isValidForm(guid)},service.patchRequirementPropertyBag=function patchRequirementPropertyBag(screenSectionId,requirementId,checklistId){var propertyBag=service.screenSection.getPropertyBagObject(screenSectionId);propertyBag.LLC_BI__Requirement__c_Id&&(propertyBag.LLC_BI__Requirement__c_Id.value=requirementId);propertyBag.LLC_BI__Requirement__c_LLC_BI__Checklist__c&&(propertyBag.LLC_BI__Requirement__c_LLC_BI__Checklist__c.value=checklistId)},service.populateOrderDescription=function populateOrderDescription(sectionId,description,isDirty){service.screenSection.setFieldDefaults(sectionId,function isDescription(field){return-1!==field.fieldName.toLowerCase().lastIndexOf(service.constants.ORDER_DESCRIPTION_FIELD_NAME.toLowerCase())},{isDirty:isDirty,value:description})},service.populateTreasuryServiceLookup=function populateTreasuryServiceLookup(sectionId,serviceId){service.screenSection.setFieldDefaults(sectionId,function isTreasuryServiceLookupField(field){return-1!==field.fieldName.toLowerCase().lastIndexOf(service.constants.TREASURY_SERVICE_LOOKUP_FIELD_NAME.toLowerCase())},{isVisible:!1,isDirty:!0,value:serviceId})},service.resetSearchResultsEndpoint=function resetSearchResultsEndpoint(){screenSectionFormBuilderRemoting.getSearchResults=service.getSearchResultsCopy},service.saveSectionWithConditionalSections=function saveSectionWithConditionalSections(rootScreenSectionId){var rootResourceGuid=service.screenSection.get(rootScreenSectionId).guid,allScreenSectionIdsToSave=service.getConditionalSections(rootResourceGuid).map(function(conditionalResource){return conditionalResource.screenSectionId});return allScreenSectionIdsToSave.push(rootScreenSectionId),screenSection.saveSections(allScreenSectionIdsToSave)},service.saveSection=function saveSection(sectionId){return service.screenSection.saveSection(sectionId)},service.setSearchResultsEndpoint=function setSearchResultsEndpoint(endpoint,accountId,treasuryServiceId){screenSectionFormBuilderRemoting.getSearchResults=function getSearchResults(screenResource){function getSearchResults(searchResults){return searchResults.filter(function(resource){if(resource.propertyBag)return function filterPropertyBag(propertyBag){for(var key in propertyBag)"ID"===propertyBag[key].fieldType&&(propertyBag[key].isVisible=!1)}(resource.propertyBag),resource})}var params={terms:_.values(screenResource.propertyBag)[0].displayValue,accountId:accountId,treasuryServiceId:treasuryServiceId},deferred=$q.defer();return apex.remoting(endpoint,params).then(function resolve(searchResults){searchResults&&0<searchResults.length&&(screenResource.children=getSearchResults(searchResults));deferred.resolve(screenResource,event)},function reject(error){deferred.reject(error)}),deferred.promise}},service.subscribe=function subscribe(observer){this.observers.push(observer)},service.unload=function unload(resources){return utils.maybeArray(resources).forEach(function(resource){service.screenSection.unloadSection(resource.screenSectionId,resource.guid),delete service.screenSection.screenSections[resource.screenSectionId]}),service.screenSection.screenSections},service.unsubscribe=function unsubscribe(observer){this.observers=this.observers.filter(function(subscriber){return subscriber!==observer})},service.overwrite=function overwrite(sectionId,fields){var propertyBag=service.screenSection.getPropertyBagObject(sectionId);if(void 0===propertyBag)return;return fields.filter(function(fieldWrapper){var canOverwrite=void 0!==propertyBag[fieldWrapper.guid]&&""!==fieldWrapper.value&&void 0!==fieldWrapper.value;return!!canOverwrite&&(angular.extend(propertyBag[fieldWrapper.guid],{value:fieldWrapper.value,displayValue:fieldWrapper.displayValue,isDirty:!0}),!0)})},service.clear=function clear(guids){utils.maybeArray(guids).forEach(function(guid){utils.maybeArray(formBuilder.getFields(guid)).forEach(function(field){service.updateFieldValue({isDirty:!1,value:void 0,displayValue:void 0},field)})})},service.publish=function publish(sectionId,fields){utils.maybeArray(fields).forEach(function(field){service.screenSection.publishEditableFieldChange(sectionId,field),(fieldType.isCheckBox(field.fieldType)||fieldType.isPicklist(field.fieldType)||fieldType.isMultiPicklist(field.fieldType))&&picklistService.updateCurrentSelectedValue(field.guid,field.value)})},service.updateFieldValue=function updateFieldValue(source,target){target.value=source.value,target.displayValue=source.displayValue,(void 0!==target.value||void 0!==target.displayValue)&&(target.isDirty=!0);return target},service.updateFieldValues=function updateFieldValues(sources,targets){var sourcesCollapsed=sources.reduce(function(accum,field){return accum[field.guid]=field,accum},{}),targetsCollapsed=targets.reduce(function(accum,field){return accum[field.guid]=field,accum},{});Object.keys(sourcesCollapsed).forEach(function(guid){targetsCollapsed[guid]&&service.updateFieldValue(sourcesCollapsed[guid],targetsCollapsed[guid])})},service.screenSection=screenSection,service.formBuilder=formBuilder,service.observers=[],service.constants=Object.freeze({TREASURY_SERVICE_LOOKUP_FIELD_NAME:"Treasury_Service__c",ORDER_DESCRIPTION_FIELD_NAME:"Description__c"}),service.getSearchResultsCopy=screenSectionFormBuilderRemoting.getSearchResults.bind({}),service.screenSection.registerForSectionSetNotification(function(section){service.observers.forEach(function(observer){observer(section)})})}angular.module("ncTreasuryServiceMaintenance_v2").service("tmScreenSection",TmScreenSectionService),TmScreenSectionService.$inject=["screenSection","formBuilder","$q","treasuryMaintenanceRemoting","screenSectionFormBuilderRemoting","fieldType","picklistService","utils"]}()},200:function(module,exports){!function(){"use strict";function Store(utils){var service=this;function dispatchWithTriggeringAction(trigger){return function(action){return service.dispatch(action,trigger)}}service.after=function after(types,callback){utils.maybeArray(types).forEach(function(type){service._afterSideEffects[type]=callback})},service.before=function before(types,callback){utils.maybeArray(types).forEach(function(type){service._beforeSideEffects[type]=callback})},service.create=function create(initialState){return service.set({checklist:initialState.checklist,checklistStatus:initialState.checklistStatus,relationship:initialState.relationship,relationshipName:initialState.relationshipName,sections:initialState.sections,enableCarryOverValues:!1,isMaintenanceRequestAbleToBeSubmitted:!1,isPrePopulating:!1,isPrePopulatingAvailable:!0,isProcessingAnalyzedAccount:!1,isProcessingAuthorizedUser:!1,isProcessingMaintenanceOrder:!1,isProcessingDelete:!1,orders:{PENDING_ORDER:{description:void 0,selectedMaintenanceService:void 0,selectedPicklistItem:void 0,selectedActionTab:void 0,fields:[],screenSectionSelections:{}}},prePopulatingContexts:{},requirementStatusesThatCanBeDeleted:[],serviceToOrders:void 0,selected:service.constants.PENDING_ORDER,expandedShoppingCartGroups:[]}),service.get()},service.dispatch=function dispatch(action,trigger){service._validateAction(action);var sideEffectAction=service._processBeforeStateChangeSideEffects(action,service.get(),trigger),newState=service._reduce(sideEffectAction||action,service.get());return service.set(newState),service._processAfterStateChangeSideEffects(action,service.get(),trigger),service.get()},service.get=function get(){return service._state},service.set=function set(state){service._state=state},service._reduce=function reduce(action,state){switch(action.type){case service.types.AUTHORIZED_USER_SAVE:return service._update(state,{isProcessingAuthorizedUser:!0});case service.types.AUTHORIZED_USER_SAVE_CANCEL:case service.types.AUTHORIZED_USER_SAVE_ERROR:case service.types.AUTHORIZED_USER_SAVE_SUCCESS:return service._update(state,{isProcessingAuthorizedUser:!1});case service.types.ANALYZED_ACCOUNT_SAVE:return service._update(state,{isProcessingAnalyzedAccount:!0});case service.types.ANALYZED_ACCOUNT_SAVE_CANCEL:case service.types.ANALYZED_ACCOUNT_SAVE_ERROR:case service.types.ANALYZED_ACCOUNT_SAVE_SUCCESS:return service._update(state,{isProcessingAnalyzedAccount:!1});case service.types.CARRY_OVER_FIELDS_CACHE:return service._updateOrder(state,service.constants.PENDING_ORDER,{fields:action.payload});case service.types.CARRY_OVER_FIELDS_CLEAR:return service._updateOrder(state,service.constants.PENDING_ORDER,{fields:[]});case service.types.CHANGE_SERVICE:return service._updateOrder(state,state.selected,{selectedMaintenanceService:action.payload});case service.types.CHANGE_PICKLIST:return service._updateOrder(state,state.selected,{selectedPicklistItem:action.payload,screenSectionSelections:Object.keys(action.payload.screenSections).reduce(function(accum,sectionId){return accum[sectionId+"."+action.payload.screenSections[sectionId].configTypes[1]]=[],accum},{})});case service.types.CHANGE_ACTION:return service._updateOrder(state,state.selected,{selectedActionTab:action.payload});case service.types.CLEAR_PREPOPULATION_CONTEXTS:return service._update(state,{prePopulatingContexts:{}});case service.types.CONFIGURATION_LOADED:return service._updateOrder(state,service.constants.PENDING_ORDER,action.payload);case service.types.DELETE_ORDER_CANCELED:return service._update(state,{isProcessingDelete:!1,orderStagedForDelete:void 0});case service.types.DELETE_ORDER_CLICKED:return service._update(state,{isProcessingDelete:!0,orderStagedForDelete:action.payload.identity});case service.types.DELETE_ORDER_COMPLETED:return service._update(state,{isProcessingDelete:!1,orderStagedForDelete:void 0,selected:service.constants.PENDING_ORDER});case service.types.DELETE_ORDER_ERROR:return service._update(state,{isProcessingDelete:!1,orderStagedForDelete:void 0});case service.types.MAINTENANCE_ORDER_DESELECT:var isPristineOrderAvailableToRevert=state.selected!==service.constants.PENDING_ORDER&&state.orders[service.utils.pristineKey(state.selected)];return isPristineOrderAvailableToRevert&&(state.orders[state.selected]=state.orders[service.utils.pristineKey(state.selected)],delete state.orders[service.utils.pristineKey(state.selected)]),service._update(state,{selected:service.constants.PENDING_ORDER});case service.types.MAINTENANCE_ORDER_LOADED_SUCCESS:var pendingOrderReference=state.orders[service.constants.PENDING_ORDER],orders=action.payload.orders;return orders[service.constants.PENDING_ORDER]=pendingOrderReference,service._update(state,{orders:orders,serviceToOrders:action.payload.serviceToOrders,checklistStatus:action.payload.checklistStatus});case service.types.MAINTENANCE_ORDER_SAVE:return service._update(state,{isProcessingMaintenanceOrder:!0});case service.types.MAINTENANCE_ORDER_SAVE_CANCEL:var cancelOrderState=service._updateOrder(state,state.selected,{description:action.payload.description});return service._update(cancelOrderState,{isProcessingMaintenanceOrder:!1});case service.types.MAINTENANCE_ORDER_SAVE_SUCCESS:var successOrderState=service._updateOrder(state,service.constants.PENDING_ORDER,{description:""});return service._update(successOrderState,{isProcessingMaintenanceOrder:!1,checklist:action.payload});case service.types.MAINTENANCE_ORDER_SELECT:return state.orders[service.utils.pristineKey(action.payload.identity)]=utils.deepClone(state.orders[action.payload.identity]),service._update(state,{selected:action.payload.identity});case service.types.MAINTENANCE_REQUEST_DISABLE_SUBMIT:return service._update(state,{isMaintenanceRequestAbleToBeSubmitted:!1});case service.types.MAINTENANCE_REQUEST_ENABLE_SUBMIT:return service._update(state,{isMaintenanceRequestAbleToBeSubmitted:!0});case service.types.ONE_TO_MANY_CLEAR_SELECTION:return service._updateOrder(state,state.selected,{screenSectionSelections:action.payload});case service.types.ONE_TO_MANY_CLEAR_SELECTION_ALL:var picklistScreenSections=state.orders[service.constants.PENDING_ORDER].selectedPicklistItem.screenSections,rebuiltSelections=Object.keys(picklistScreenSections).reduce(function(accum,sectionId){return accum[sectionId+"."+picklistScreenSections[sectionId].configTypes[1]]=[],accum},{});return service._updateOrder(state,service.constants.PENDING_ORDER,{screenSectionSelections:rebuiltSelections});case service.types.ONE_TO_MANY_SELECT_RECORD:return service._updateOrder(state,state.selected,{screenSectionSelections:action.payload});case service.types.PREPOPULATING_ACTIVATE:return service._update(state,{isPrePopulating:!0});case service.types.PREPOPULATING_DEACTIVATE:return service._update(state,{isPrePopulating:!1});case service.types.PREPOPULATING_ADD_CONTEXT:var populatingContextToAdd=_.clone(state.prePopulatingContexts);return populatingContextToAdd[action.payload.context]=action.payload.record,service._update(state,{prePopulatingContexts:populatingContextToAdd});case service.types.PREPOPULATING_REMOVE_CONTEXT:var populatingContextCopyToRemove=_.clone(state.prePopulatingContexts);return delete populatingContextCopyToRemove[action.payload.context],service._update(state,{prePopulatingContexts:populatingContextCopyToRemove});case service.types.PREPOPULATING_DISABLE_OPTION:return service._update(state,{isPrePopulatingAvailable:!1});case service.types.PREPOPULATING_ENABLE_OPTION:return service._update(state,{isPrePopulatingAvailable:!0});case service.types.SHOPPING_CART_GROUP_COLLAPSE:return service._update(state,{expandedShoppingCartGroups:state.expandedShoppingCartGroups.filter(function(serviceId){var isExpandedServiceNotInPayloadToCollapse=-1===utils.maybeArray(action.payload).indexOf(serviceId);return isExpandedServiceNotInPayloadToCollapse})});case service.types.SHOPPING_CART_GROUP_EXPAND:return service._update(state,{expandedShoppingCartGroups:_.uniq(state.expandedShoppingCartGroups.concat(utils.maybeArray(action.payload)))});case service.types.SYSTEM_PROPERTIES_LOADED:return service._update(state,{enableCarryOverValues:action.payload.enableCarryOverValues,enableMassActionStandalone:action.payload.enableMassActionStandalone,requirementStatusesThatCanBeDeleted:action.payload.requirementStatusesThatCanBeDeleted});default:return state}},service._update=function update(state,updates){var newState=_.clone(state);return newState=_.extend(newState,updates)},service._updateOrder=function updateOrder(state,identity,updates){var newState=_.clone(state),newOrderState=_.clone(newState.orders[identity]);return newOrderState=_.extend(newOrderState,updates),newState.orders[identity]=newOrderState,newState},service._processAfterStateChangeSideEffects=function processAfterStateChangeSideEffects(action,state,trigger){return(service._afterSideEffects[action.type]||angular.noop)(action,state,dispatchWithTriggeringAction(action),trigger)},service._processBeforeStateChangeSideEffects=function processBeforeStateChangeSideEffects(action,state,trigger){return(service._beforeSideEffects[action.type]||angular.noop)(action,state,dispatchWithTriggeringAction(action),trigger)},service._validateAction=function validateAction(action){if(void 0===action.type||void 0===service.types[action.type])throw new Error("Action Type: "+action.type+"is not in: "+Object.keys(service.types).join(","))},service._state=void 0,service._beforeSideEffects={},service._afterSideEffects={},service.constants=Object.freeze({PENDING_ORDER:"PENDING_ORDER",PRISTINE_ORDER:"PRISTINE_ORDER"}),service.utils={},service.utils.pristineKey=function(requirementId){return requirementId+"."+service.constants.PRISTINE_ORDER},service.utils.compositeKey=function(sObjectType,sectionId){return sObjectType+"."+sectionId},service.types=Object.freeze({AUTHORIZED_USER_SAVE:"AUTHORIZED_USER_SAVE",AUTHORIZED_USER_SAVE_CANCEL:"AUTHORIZED_USER_SAVE_CANCEL",AUTHORIZED_USER_SAVE_ERROR:"AUTHORIZED_USER_SAVE_ERROR",AUTHORIZED_USER_SAVE_SUCCESS:"AUTHORIZED_USER_SAVE_SUCCESS",ANALYZED_ACCOUNT_SAVE:"ANALYZED_ACCOUNT_SAVE",ANALYZED_ACCOUNT_SAVE_CANCEL:"ANALYZED_ACCOUNT_SAVE_CANCEL",ANALYZED_ACCOUNT_SAVE_ERROR:"ANALYZED_ACCOUNT_SAVE_ERROR",ANALYZED_ACCOUNT_SAVE_SUCCESS:"ANALYZED_ACCOUNT_SAVE_SUCCESS",CHANGE_SERVICE:"CHANGE_SERVICE",CHANGE_PICKLIST:"CHANGE_PICKLIST",CHANGE_ACTION:"CHANGE_ACTION",CARRY_OVER_FIELDS_CACHE:"CARRY_OVER_FIELDS_CACHE",CARRY_OVER_FIELDS_CLEAR:"CARRY_OVER_FIELDS_CLEAR",CONFIGURATION_LOADED:"CONFIGURATION_LOADED",DELETE_ORDER_CANCELED:"DELETE_ORDER_CANCELED",DELETE_ORDER_CLICKED:"DELETE_ORDER_CLICKED",DELETE_ORDER_COMPLETED:"DELETE_ORDER_COMPLETED",DELETE_ORDER_ERROR:"DELETE_ORDER_ERROR",LOAD_ORDERS_SUCCESS:"LOAD_ORDERS_SUCCESS",LOAD_ORDERS_ERROR:"LOAD_ORDERS_ERROR",MAINTENANCE_ORDER_DESELECT:"MAINTENANCE_ORDER_DESELECT",MAINTENANCE_ORDER_LOADED_ERROR:"MAINTENANCE_ORDER_LOADED_ERROR",MAINTENANCE_ORDER_LOADED_SUCCESS:"MAINTENANCE_ORDER_LOADED_SUCCESS",MAINTENANCE_ORDER_SAVE:"MAINTENANCE_ORDER_SAVE",MAINTENANCE_ORDER_SAVE_CANCEL:"MAINTENANCE_ORDER_SAVE_CANCEL",MAINTENANCE_ORDER_SAVE_SUCCESS:"MAINTENANCE_ORDER_SAVE_SUCCESS",MAINTENANCE_ORDER_SELECT:"MAINTENANCE_ORDER_SELECT",MAINTENANCE_ORDER_SUBMITTED:"MAINTENANCE_ORDER_SUBMITTED",MAINTENANCE_REQUEST_DISABLE_SUBMIT:"MAINTENANCE_REQUEST_DISABLE_SUBMIT",MAINTENANCE_REQUEST_ENABLE_SUBMIT:"MAINTENANCE_REQUEST_ENABLE_SUBMIT",MAINTENANCE_REQUEST_SUBMIT:"MAINTENANCE_REQUEST_SUBMIT",MAINTENANCE_REQUEST_SUBMIT_ERROR:"MAINTENANCE_REQUEST_SUBMIT_ERROR",MAINTENANCE_REQUEST_SUBMIT_SUCCESS:"MAINTENANCE_REQUEST_SUBMIT_SUCCESS",ONE_TO_MANY_SELECT_RECORD:"ONE_TO_MANY_SELECT_RECORD",ONE_TO_MANY_CLEAR_SELECTION:"ONE_TO_MANY_CLEAR_SELECTION",ONE_TO_MANY_CLEAR_SELECTION_ALL:"ONE_TO_MANY_CLEAR_SELECTION_ALL",PREPOPULATING_ACTIVATE:"PREPOPULATING_ACTIVATE",PREPOPULATING_DEACTIVATE:"PREPOPULATING_DEACTIVATE",PREPOPULATING_ADD_CONTEXT:"PREPOPULATING_ADD_CONTEXT",PREPOPULATING_DISABLE_OPTION:"PREPOPULATING_DISABLE_OPTION",PREPOPULATING_ENABLE_OPTION:"PREPOPULATING_ENABLE_OPTION",PREPOPULATING_REMOVE_CONTEXT:"PREPOPULATING_REMOVE_CONTEXT",CLEAR_PREPOPULATION_CONTEXTS:"CLEAR_PREPOPULATION_CONTEXTS",SECTION_LOADED:"SECTION_LOADED",SHOPPING_CART_GROUP_COLLAPSE:"SHOPPING_CART_GROUP_COLLAPSE",SHOPPING_CART_GROUP_EXPAND:"SHOPPING_CART_GROUP_EXPAND",SYSTEM_PROPERTIES_LOADED:"SYSTEM_PROPERTIES_LOADED"})}angular.module("ncTreasuryServiceMaintenance_v2").service("store",Store),Store.$inject=["utils"]}()},201:function(module,exports){!function(){"use strict";function StoreEffects(store,screenSection,config,loader,saver,MaintenanceOrderUI,treasuryMaintenance,$location,$routeParams,utils){var service=this;service.register=function register(){store.before(store.types.ANALYZED_ACCOUNT_SAVE,service._beforeAnalyzedAccountSave),store.before(store.types.AUTHORIZED_USER_SAVE,service._beforeAuthorizedUserSave),store.before(store.types.CHANGE_SERVICE,service._beforeChangeService),store.before(store.types.CHANGE_PICKLIST,service._beforeChangePicklist),store.before(store.types.CHANGE_ACTION,service._beforeChangeAction),store.before(store.types.ONE_TO_MANY_CLEAR_SELECTION,service._beforeOneToManyClearSelection),store.before(store.types.ONE_TO_MANY_SELECT_RECORD,service._beforeOneToManySelectRecord),store.before(store.types.MAINTENANCE_ORDER_LOADED_SUCCESS,service._beforeMaintenanceOrderLoadedSuccess),store.before(store.types.MAINTENANCE_ORDER_DESELECT,service._beforeMaintenanceOrderDeselect),store.before(store.types.MAINTENANCE_ORDER_SELECT,service._beforeMaintenanceOrderSelect),store.before(store.types.PREPOPULATING_ACTIVATE,service._beforePrepopulatingActivate),store.after([store.types.ANALYZED_ACCOUNT_SAVE_CANCEL,store.types.ANALYZED_ACCOUNT_SAVE_ERROR,store.types.ANALYZED_ACCOUNT_SAVE_SUCCESS,store.types.AUTHORIZED_USER_SAVE_CANCEL,store.types.AUTHORIZED_USER_SAVE_ERROR,store.types.AUTHORIZED_USER_SAVE_SUCCESS],service._afterJunctionObjectModalClosed),store.after(store.types.CHANGE_ACTION,service._afterChangeAction),store.after(store.types.CHANGE_SERVICE,service._afterChangeService),store.after(store.types.CHANGE_PICKLIST,service._afterChangePicklist),store.after(store.types.MAINTENANCE_ORDER_SAVE_SUCCESS,service._afterMaintenanceOrderSaveSuccess),store.after([store.types.ONE_TO_MANY_CLEAR_SELECTION,store.types.ONE_TO_MANY_CLEAR_SELECTION_ALL],service._afterOneToManyClearSelection),store.after(store.types.ONE_TO_MANY_SELECT_RECORD,service._afterOneToManySelectRecord),store.after(store.types.MAINTENANCE_ORDER_LOADED_SUCCESS,service._afterMaintenanceOrderLoadedSuccess),store.after(store.types.MAINTENANCE_ORDER_DESELECT,service._afterMaintenanceOrderDeselect)},service._afterJunctionObjectModalClosed=function afterJunctionObjectModalClosed(action,state,dispatch){return screenSection.resetSearchResultsEndpoint(),treasuryMaintenance.clearMessages(),action},service._afterChangeAction=function afterChangeAction(action,state,dispatch){return service._updateAutofill(state,dispatch),action},service._afterChangePicklist=function afterChangePicklist(action,state,dispatch){var selectedPicklistItem=state.orders[state.selected].selectedPicklistItem;return!0!==selectedPicklistItem.isMassAction&&(dispatch({type:store.types.CHANGE_ACTION,payload:config.get().getFirstActionTabForPicklist(selectedPicklistItem)}),service._resetAutofill(state,dispatch)),action},service._afterChangeService=function afterChangeService(action,state,dispatch){return dispatch({type:store.types.CHANGE_PICKLIST,payload:config.get().getFirstPicklistForService(state.orders[state.selected].selectedMaintenanceService)}),action},service._afterOneToManyClearSelection=function afterOneToManyClearSelection(action,state,dispatch){var isPrepopulatingEnabled=service._calculatePrepopulateIsEnabled(state);dispatch(isPrepopulatingEnabled?{type:store.types.PREPOPULATING_ENABLE_OPTION}:{type:store.types.PREPOPULATING_DISABLE_OPTION});isPrepopulatingEnabled||!0!==state.isPrePopulating||dispatch({type:store.types.PREPOPULATING_DEACTIVATE});return action},service._afterOneToManySelectRecord=function afterOneToManySelectRecord(action,state,dispatch){return dispatch({type:store.types.PREPOPULATING_DEACTIVATE}),service._updateAutofill(state,dispatch),action},service._afterMaintenanceOrderSaveSuccess=function afterMaintenanceOrderSaveSuccess(action,state,dispatch){if(void 0===$routeParams.checklistId){var route=["maintenance",$routeParams.treasuryIds,action.payload].join("/");$location.url(route)}var guids=screenSection.generateGuids(state.orders[state.selected]);screenSection.clearFields(guids),screenSection.evaluate(guids),"PENDING_ORDER"!==state.selected&&dispatch({type:store.types.MAINTENANCE_ORDER_DESELECT});return dispatch({type:store.types.ONE_TO_MANY_CLEAR_SELECTION_ALL}),loader.load(state.checklist).then(function(dtos){dispatch({type:store.types.MAINTENANCE_ORDER_LOADED_SUCCESS,payload:dtos})}),action},service._afterMaintenanceOrderLoadedSuccess=function afterMaintenanceOrderLoadedSuccess(action,state,dispatch){var orders=Object.keys(state.orders||{});service._resetAutofill(state,dispatch),0<orders.length&&state.checklistStatus===config.labelProvider.getLabels().Status_New?dispatch({type:store.types.MAINTENANCE_REQUEST_ENABLE_SUBMIT}):dispatch({type:store.types.MAINTENANCE_REQUEST_DISABLE_SUBMIT});return action},service._afterMaintenanceOrderDeselect=function afterMaintenanceOrderDeselect(action,state,dispatch){return service._resetAutofill(state,dispatch),action},service._beforeAnalyzedAccountSave=function beforeAnalyzedAccountSave(action,state,dispatch){return screenSection.setSearchResultsEndpoint("LLC_BI.TreasuryMaintenanceDataService.GetAnalyzedAccountSearchResults",state.relationship,state.orders[state.selected].selectedMaintenanceService.identity),action},service._beforeAuthorizedUserSave=function beforeAuthorizedUserSave(action,state,dispatch){return screenSection.setSearchResultsEndpoint("LLC_BI.TreasuryMaintenanceDataService.GetAuthorizedUserSearchResults",state.relationship,state.orders[state.selected].selectedMaintenanceService.identity),action},service._beforeChangeService=function beforeChangeService(action,state,dispatch){"PENDING_ORDER"!==state.selected&&dispatch({type:store.types.MAINTENANCE_ORDER_DESELECT});dispatch({type:store.types.ONE_TO_MANY_CLEAR_SELECTION_ALL}),dispatch({type:store.types.CLEAR_PREPOPULATION_CONTEXTS}),state.isPrePopulating&&dispatch({type:store.types.PREPOPULATING_DEACTIVATE});return action},service._beforeChangePicklist=function beforeChangePicklist(action,state,dispatch){"PENDING_ORDER"!==state.selected&&dispatch({type:store.types.MAINTENANCE_ORDER_DESELECT});dispatch({type:store.types.ONE_TO_MANY_CLEAR_SELECTION_ALL}),dispatch({type:store.types.CLEAR_PREPOPULATION_CONTEXTS}),state.isPrePopulating&&dispatch({type:store.types.PREPOPULATING_DEACTIVATE});return action},service._beforeChangeAction=function beforeChangeAction(action,state,dispatch,trigger){var isDeselecting="PENDING_ORDER"!==state.selected;isDeselecting&&dispatch({type:store.types.MAINTENANCE_ORDER_DESELECT});state.isPrePopulating&&dispatch({type:store.types.PREPOPULATING_DEACTIVATE});var isSwitchingBetweenActionTabs=void 0===trigger;if(!isDeselecting&&state.enableCarryOverValues&&isSwitchingBetweenActionTabs){var order=state.orders[state.selected],fields=screenSection.getFieldsAsMap(order),filtered=(order.fields||[]).filter(function(field){return void 0===fields[field.guid]}),composite=_.values(fields).concat(filtered);dispatch({type:store.types.CARRY_OVER_FIELDS_CACHE,payload:composite})}return action},service._beforeOneToManyClearSelection=function beforeOneToManyClearSelection(action,state,dispatch){var order=state.orders[state.selected],copiedSelections=Object.keys(order.screenSectionSelections||{}).reduce(function(accum,compositeKey){return accum[compositeKey]=order.screenSectionSelections[compositeKey].concat([]),accum},{}),compositeKey=screenSection.compositeSelectionKey(action.payload.identity,action.payload.type);return copiedSelections[compositeKey]=[],dispatch({type:store.types.PREPOPULATING_REMOVE_CONTEXT,payload:{context:action.payload.type}}),{type:store.types.ONE_TO_MANY_CLEAR_SELECTION,payload:copiedSelections}},service._beforeOneToManySelectRecord=function beforeOneToManySelectRecord(action,state,dispatch){var order=state.orders[state.selected],screenSectionSelectionsCopy=Object.keys(order.screenSectionSelections||{}).reduce(function(accum,compositeKey){return accum[compositeKey]=order.screenSectionSelections[compositeKey].concat([]),accum},{}),compositeKey=screenSection.compositeSelectionKey(action.payload.identity,action.payload.type);return screenSectionSelectionsCopy[compositeKey]=action.payload.selections,dispatch({type:store.types.PREPOPULATING_ADD_CONTEXT,payload:{context:action.payload.type,record:action.payload.selections[0]}}),{type:store.types.ONE_TO_MANY_SELECT_RECORD,payload:screenSectionSelectionsCopy}},service._beforeMaintenanceOrderLoadedSuccess=function beforeMaintenanceOrderLoadedSuccess(action,state,dispatch){var processed=(action.payload||[]).map(function(order){return MaintenanceOrderUI(order,config.get())}).reduce(function(accum,order){accum.orders[order.identity]=order;var collection=accum.serviceToOrders[order.parentContextId]||[],composite=collection.concat([order.identity]);return accum.serviceToOrders[order.parentContextId]=composite,accum.checklistStatus=order.checklistStatus,accum},{orders:{},serviceToOrders:{},checklistStatus:""});return{type:store.types.MAINTENANCE_ORDER_LOADED_SUCCESS,payload:{orders:processed.orders,serviceToOrders:processed.serviceToOrders,checklistStatus:processed.checklistStatus}}},service._beforeMaintenanceOrderDeselect=function beforeMaintenanceOrderDeselect(action,state,dispatch){var guids=screenSection.generateGuids(state.orders[state.selected]),conditionals=screenSection.getConditionalSections(guids);return screenSection.clearFields(guids),screenSection.unload(conditionals),screenSection.evaluate(guids),dispatch({type:store.types.CARRY_OVER_FIELDS_CACHE,payload:[]}),action},service._beforeMaintenanceOrderSelect=function beforeMaintenanceOrderSelect(action,state,dispatch){return dispatch({type:store.types.PREPOPULATING_DEACTIVATE}),dispatch({type:store.types.ONE_TO_MANY_CLEAR_SELECTION_ALL}),dispatch({type:store.types.CLEAR_PREPOPULATION_CONTEXTS}),dispatch({type:store.types.PREPOPULATING_DISABLE_OPTION}),action},service._beforePrepopulatingActivate=function beforePrepopulatingActivate(action,state,dispatch){var guids=screenSection.generateGuids(state.orders[state.selected]),conditionals=screenSection.getConditionalSections(guids);return screenSection.unload(conditionals),action},service._calculatePrepopulateIsEnabled=function calculatePrepopulateIsEnabled(state){var order=state.orders[state.selected];if(state.selected!==store.constants.PENDING_ORDER)return!1;if(!0===order.selectedPicklistItem.isMassAction)return!1;if(1<service._calculateTotalOneToManySelections(order.screenSectionSelections))return!1;var sObjectTypesForActionTab=service._calculateSObjectTypesForActionTab(order.selectedActionTab),sObjectTypesForSelections=utils.toUpperCaseArray(Object.keys(state.prePopulatingContexts));if(0<sObjectTypesForActionTab.filter(function(sObjectType){return-1!==sObjectTypesForSelections.indexOf(sObjectType)||"LLC_BI__TREASURY_SERVICE__C"===sObjectType}).length)return!0;return!1},service._calculateTotalOneToManySelections=function calculateTotalOneToManySelections(screenSectionSelections){return Object.keys(screenSectionSelections||{}).reduce(function(accum,sectionId){return Array.isArray(screenSectionSelections[sectionId])&&(accum+=screenSectionSelections[sectionId].length),accum},0)},service._calculateSObjectTypesForActionTab=function calculateSObjectTypesForActionTab(selectedActionTab){var sectionIds=Object.keys(selectedActionTab.screenSections)||[];return _.uniq(sectionIds.map(function(sectionId){var section=selectedActionTab.screenSections[sectionId];return section.type.toUpperCase()}))},service._resetAutofill=function resetAutofill(state,dispatch){dispatch({type:store.types.PREPOPULATING_DEACTIVATE}),service._updateAutofill(dispatch({type:store.types.CLEAR_PREPOPULATION_CONTEXTS}),dispatch)},service._updateAutofill=function updateAutofill(state,dispatch){service._calculatePrepopulateIsEnabled(state)?dispatch({type:store.types.PREPOPULATING_ENABLE_OPTION}):dispatch({type:store.types.PREPOPULATING_DISABLE_OPTION})}}angular.module("ncTreasuryServiceMaintenance_v2").service("storeEffects",StoreEffects),StoreEffects.$inject=["store","tmScreenSection","maintenanceConfigurationLoader","maintenanceOrderLoader","maintenanceOrderSaver","maintenanceOrderUI","treasuryMaintenance","$location","$routeParams","utils"]}()},202:function(module,exports){!function(){"use strict";angular.module("ncTreasuryServiceMaintenance_v2").service("utils",function Utils(){function maybeArray(items){return void 0===items?[]:Array.isArray(items)?items:[items]}this.deepClone=function deepClone(structure){return JSON.parse(JSON.stringify(structure))},this.isChangeFor=function isChangeFor(changes,binding){return changes.hasOwnProperty(binding)&&void 0!==changes[binding].currentValue},this.maybeArray=maybeArray,this.toUpperCaseArray=function toUpperCaseArray(items){return maybeArray(items).map(function(item){return item.toUpperCase()})}})}()}});